<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SK κ²°ν•© ν• μΈ κ³„μ‚°κΈ°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* CSS from sk_styles.css */
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; /* slate-50 */ }
        .input-group { margin-bottom: 1.5rem; }
        .input-label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #334155; /* slate-700 */ }
        .input-field, .select-field { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #cbd5e1; /* slate-300 */ border-radius: 0.375rem; box-shadow: sm; transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }
        .input-field:focus, .select-field:focus { border-color: #ef4444; /* red-500 */ outline: none; box-shadow: 0 0 0 0.2rem rgba(239, 68, 68, 0.25); } /* SK Red focus */
        .select-field:disabled, .input-field:disabled { background-color: #e9e9e9; /* Slightly darker gray for disabled */ cursor: not-allowed; opacity: 0.7; }
        .btn-primary { background-color: #ef4444; /* red-500 */ color: white; padding: 0.75rem 1.5rem; border-radius: 0.375rem; font-weight: 600; transition: background-color 0.3s ease; }
        .btn-primary:hover { background-color: #dc2626; /* red-600 */ }
        .btn-secondary { background-color: #f97316; /* orange-500 */ color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500; transition: background-color 0.3s ease; }
        .btn-secondary:hover { background-color: #ea580c; /* orange-600 */ }
        .section-title { font-size: 1.5rem; font-weight: 700; color: #c2410c; /* orange-700 */ margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #fb923c /* orange-400 */;}
        .result-card { background-color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); margin-bottom: 1.5rem; }
        .result-label { color: #475569; /* slate-600 */ }
        .result-value { color: #1e293b; /* slate-800 */ font-weight: 600;}
        .total-value { color: #ef4444; /* red-500 */ font-size: 1.5rem; font-weight: 700;}
        .mobile-line-item { border: 1px solid #e2e8f0; /* slate-200 */ padding: 1rem; border-radius: 0.375rem; margin-bottom: 0.75rem; }
        .radio-label { margin-right: 1rem; margin-bottom: 0.5rem; display: inline-flex; align-items: center; cursor: pointer;}
        .radio-input { margin-right: 0.5rem; accent-color: #ef4444; /* red-500 */ }
        .info-box { background-color: #fff7ed; /* orange-50 */ border-left: 4px solid #f97316; /* orange-500 */ padding: 1rem; margin-top:0.5rem; margin-bottom:1rem; font-size: 0.875rem; color: #9a3412; /* orange-800 */}
        .info-box ul { padding-left: 1.25rem; list-style-type: disc; }
        .info-box ul ul { padding-left: 1rem; list-style-type: circle;}
        .sensitive-info-box { background-color: #fffbeb; /* yellow-50 */ border-left: 4px solid #f59e0b; /* yellow-500 */ padding: 1rem; margin-bottom: 1.5rem; font-size: 0.875rem; color: #b45309; /* yellow-700 */}
        .sensitive-info-box a { color: #0ea5e9; /* sky-500 */ text-decoration: underline;}
        .sensitive-info-box a:hover { color: #0284c7; /* sky-600 */}
        .toggle-switch { position: relative; display: inline-block; width: 40px; height: 20px; margin-left: 10px; vertical-align: middle;}
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px;}
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%;}
        input:checked + .slider { background-color: #ef4444; /* red-500 */ }
        input:checked + .slider:before { transform: translateX(20px); }
        .discount-details { background-color: #ffe4e6; border: 1px solid #ffb3b3; padding: 0.75rem; border-radius: 0.375rem; font-size:0.875rem; } /* Light red for SKT */
        .discount-details ul { padding-left: 1.25rem; }
        .discount-details ul ul { padding-left: 1rem; }
        .discount-details h4 { font-weight: 600; margin-top: 0.75rem; margin-bottom: 0.25rem; color: #be123c; } /* Darker red for subheadings */
        .discount-details strong { color: #dc2626; } /* SKT Red for emphasis */
        .summary-item { margin-bottom: 0.25rem; }
        .message-script-area { width: 100%; min-height: 150px; padding: 0.5rem; border: 1px solid #cbd5e1; border-radius: 0.375rem; font-size: 0.875rem; white-space: pre-wrap; word-wrap: break-word; }
        .copy-button-container { text-align: right; margin-top: 0.5rem; }
        .copy-feedback { font-size: 0.75rem; color: green; margin-left: 0.5rem; }
        .cost-qualifier {font-size: 0.875rem; color: #475569; margin-left: 0.25rem;}
    </style>
</head>
<body class="text-slate-800">
    <header class="bg-red-600 text-white p-6 shadow-md">
        <div class="container mx-auto max-w-4xl">
            <h1 class="text-3xl font-bold text-center">SK κ²°ν•© ν• μΈ κ³„μ‚°κΈ°</h1>
            <p class="text-center text-red-200 mt-1">μ„ νƒν•μ‹  μ„λΉ„μ¤μ™€ ν• μΈ μ ν•μ— λ”°λ¥Έ μμƒ μ”κΈμ„ κ³„μ‚°ν•΄ λ³΄μ„Έμ”.</p>
        </div>
    </header>

    <main class="container mx-auto max-w-4xl p-4 sm:p-6 lg:p-8">
        <section id="inputSection" class="mb-8">
            <h2 class="section-title">1. μ„λΉ„μ¤ μ„ νƒ (3λ…„ μ•½μ • κΈ°μ¤€, VAT ν¬ν•¨)</h2>
            
            <div class="sensitive-info-box">
                <p class="font-semibold text-yellow-800">β οΈ λ―Όκ°μ •λ³΄</p>
                <p class="mt-1">
                    <a href="https://miso.kr/booking/forms/secure-details?querystring=κ³ κ°λ‹ μ „ν™”λ²νΈ" target="_blank">https://miso.kr/booking/forms/secure-details?querystring=κ³ κ°λ‹ μ „ν™”λ²νΈ</a>
                </p>
                <p class="mt-1">γ„΄&gt; μ„ λ§ν¬λ¥Ό κ³ κ°μ—κ² λ¬Έμλ΅ μ „μ†΅ν•΄μ£Όμ„Έμ”. (μ•„λ μ¤ν¬λ¦½νΈ λ³µμ‚¬ κΈ°λ¥ μ΄μ©)</p>
                <p class="mt-2">
                    μ°Έκ³  μ¤ν”„λ λ“μ‹νΈ: <a href="https://docs.google.com/spreadsheets/d/10d21RrhIPBiJr7RZIHnk0h1dB4GvTEcHCuXSyFYw1M4/edit?gid=0#gid=0" target="_blank">λ°”λ΅κ°€κΈ°</a>
                </p>
            </div>

            <div class="input-group">
                <label class="input-label">μΈν„°λ„· μ ν• μ„ νƒ</label>
                <div class="flex items-center space-x-4">
                    <label class="radio-label">
                        <input type="radio" name="internetType" value="bundle" class="radio-input" checked> μΈν„°λ„· + TV λ²λ“¤
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="internetType" value="standalone" class="radio-input"> μΈν„°λ„· λ‹¨λ…
                    </label>
                </div>
            </div>

            <p class="mb-6 text-sm text-slate-600">μ•„λ ν•­λ©λ“¤μ„ μ„ νƒν•κ±°λ‚ μ…λ ¥ν•΄μ£Όμ„Έμ”. λ¨λ“  μ”κΈμ€ SKλΈλ΅λ“λ°΄λ“/SKν…”λ μ½¤ ν‘μ¤€ 3λ…„ μ•½μ •, λ¶€κ°€μ„Έ ν¬ν•¨ κΈμ•΅μ„ κΈ°μ¤€μΌλ΅ ν•©λ‹λ‹¤.</p>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="input-group">
                    <label for="internetPlan" class="input-label">SKB μΈν„°λ„· μ”κΈμ </label>
                    <select id="internetPlan" class="select-field">
                        </select>
                </div>
                
                <div class="input-group">
                    <label for="wifiRouter" class="input-label block mb-1">μ™€μ΄νμ΄ κ³µμ κΈ° (μ„ νƒ)</label>
                    <select id="wifiRouter" class="select-field">
                        </select>
                </div>

                <div class="input-group">
                    <label for="tvPlan" class="input-label">B tv μ”κΈμ  (1λ²μ§Έ TV)</label>
                    <select id="tvPlan" class="select-field">
                       </select>
                </div>

                <div class="input-group">
                    <label for="tvStb" class="input-label">AI/νΉμ μ…‹ν†±λ°•μ¤ μ¶”κ°€ (μ„ νƒ)</label>
                    <select id="tvStb" class="select-field">
                        <option value="none" data-price="0">μ„ νƒ μ•ν•¨ (κΈ°λ³Έμ…‹ν†± μ‚¬μ©)</option>
                    </select>
                   <p class="text-xs text-slate-500 mt-1">TV μ”κΈμ μ— κΈ°λ³Έ μ…‹ν†±(μ: μ¤λ§νΈ3)μ΄ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤. NUGU, Apple TV λ“± AI/νΉμ μ…‹ν†±μΌλ΅ λ³€κ²½ λλ” μ¶”κ°€ μ‹ μ„ νƒν•©λ‹λ‹¤.</p>
                </div>

                <div class="input-group">
                    <label for="additionalTvPlan" class="input-label">μ¶”κ°€ TV μ„ νƒ (2λ²μ§Έ TV)</label>
                    <select id="additionalTvPlan" class="select-field">
                       </select>
                </div>
                
                <div class="input-group">
                    <label for="phonePlan" class="input-label">μ§‘μ „ν™” μ”κΈμ </label>
                    <select id="phonePlan" class="select-field">
                        </select>
                </div>
            </div>
            
            <div class="input-group mt-6 hidden" id="onGajokYearsGroup">
                <label for="onGajokYears" class="input-label">κ°€μ΅± μ΄ μ‚¬μ© μ—°μ (μ¨κ°€μ΅± ν• μΈμ©)</label>
                <select id="onGajokYears" class="select-field">
                    <option value="0_9">10λ…„ λ―Έλ§</option>
                    <option value="10_19">10λ…„ μ΄μƒ ~ 20λ…„ λ―Έλ§</option>
                    <option value="20_29">20λ…„ μ΄μƒ ~ 30λ…„ λ―Έλ§</option>
                    <option value="30_plus">30λ…„ μ΄μƒ</option>
                </select>
            </div>
        </section>

        <section id="discountTypeSection" class="mb-8">
            <h2 class="section-title">2. κ²°ν•© ν• μΈ μ ν• μ„ νƒ</h2>
            <div class="bg-white p-6 rounded-lg shadow">
                <p class="mb-4 text-sm text-slate-600">κ°€μ¥ μ λ¦¬ν• ν• μΈ μ ν•μ„ μ„ νƒν•κ±°λ‚, κ° μ ν•λ³„ μμƒ μ”κΈμ„ λΉ„κµν•΄λ³΄μ„Έμ”.</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2">
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="noBundleDiscount" class="radio-input" checked> κ²°ν•© ν• μΈ μ—†μ</label>
                        </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="μ”μ¦κ°€μ΅±κ²°ν•©" class="radio-input"> μ”μ¦κ°€μ΅±κ²°ν•©</label>
                        <label class="toggle-switch"><input type="checkbox" id="yozoomGajokDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="μ¨κ°€μ΅±ν• μΈ" class="radio-input"> μ¨κ°€μ΅±ν• μΈ</label>
                        <label class="toggle-switch"><input type="checkbox" id="onGajokDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="ν¨λ°€λ¦¬κ²°ν•©" class="radio-input"> ν¨λ°€λ¦¬κ²°ν•©</label>
                        <label class="toggle-switch"><input type="checkbox" id="familySktDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                    <div class="flex items-center">
                        <label class="radio-label"><input type="radio" name="discountType" value="μ•λ°ν• κ²°ν•©" class="radio-input"> μ•λ°ν• κ²°ν•©</label>
                        <label class="toggle-switch"><input type="checkbox" id="mvnoSktDetailsToggle"><span class="slider"></span></label>
                        <span class="ml-1 text-xs text-slate-500">(μƒμ„Έλ³΄κΈ°)</span>
                    </div>
                </div>
                <div class="input-group mt-6">
                    <label class="input-label">κ²°ν•© μ μ© μ‹μ  (μ›” μ²­κµ¬μ”κΈ ν‘μ‹ λ°©μ‹)</label>
                    <div class="space-y-2">
                        <label class="radio-label">
                            <input type="radio" name="bundleApplicationTime" value="pre" class="radio-input" checked> μ„ κ²°ν•© (μ›” μ²­κµ¬μ•΅μ— ν• μΈ μ¦‰μ‹ λ°μ)
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="bundleApplicationTime" value="post" class="radio-input"> ν›„κ²°ν•© (μ›” μ²­κµ¬μ•΅μ— ν• μΈ λ―Έλ°μ, μ¶”ν›„ μ μ©)
                        </label>
                    </div>
                    <p class="text-xs text-slate-500 mt-1">ν›„κ²°ν•© μ„ νƒ μ‹, μµμΆ… μ›” λ‚©λ¶€μ•΅μ€ ν• μΈ μ „ κΈμ•΅μΌλ΅ ν‘μ‹λλ©°, μ‹¤μ  μ μ©λ  ν• μΈμ•΅μ€ λ³„λ„λ΅ μ•λ‚΄λ©λ‹λ‹¤.</p>
                </div>

                <div id="yozoomGajokDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">μ”μ¦κ°€μ΅±κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ: <span id="detailYgInternetDiscount" class="font-bold">0</span>μ› <span id="detailYgInternetType" class="text-xs"></span></p>
                    <p>ν΄λ€ν° μ΄ ν• μΈ (μ°Έκ³ μ©): <span id="detailYgMobileDiscount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-red-300">
                    <div class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details">
                        <p class="font-bold">μ£Όμ” νΉμ§•:</p><ul><li>μΈν„°λ„· λ…μμ λ³ΈμΈ λ¨λ°”μΌ 1νμ„  ν•„μ ν¬ν•¨, μµλ€ 5λ€ κ°€μ΅± λ¨λ°”μΌ κ²°ν•©.</li><li>λ…μ λ‹¤λ¥Έ κ°€μ΅± λ¨λ°”μΌ κ²°ν•© μ‹, μµλ€ 2νμ„  μΈν„°λ„· ν• μΈ μ μ© κ°€λ¥.</li></ul>
                        <p class="font-bold mt-2">μ„ κ²°ν•© μ΅°κ±΄:</p><ul><li>μΈν„°λ„· λ…μμ + λ™μΌ λ…μ SKT ν΄λ€ν° 1λ€ ν•„μ.</li></ul>
                        <p class="font-bold mt-2">μµλ€ κ²°ν•© κ°€λ¥ νμ„ :</p><ul><li>μΈν„°λ„· μµλ€ 2νμ„  + λ¨λ°”μΌ 5νμ„  (κ°κ° λ…μμ λ° μ¥μ† λ‹¤λ¥΄κ² κ°€λ¥).</li></ul>
                        <p class="font-bold mt-2">μΈν„°λ„· ν• μΈ (JSON κΈ°λ°):</p><ul id="yozoomGajokInternetDiscountTiers"></ul>
                        <p class="font-bold mt-2">ν΄λ€ν° ν• μΈ (μΈν„°λ„· μ†λ„ λ° νμ„  μ κΈ°λ°, μ°Έκ³ μ© - κΈ°μ΅΄ λ΅μ§ μ μ§€):</p><ul id="yozoomGajokMobileDiscountTiers"></ul>
                        <p class="font-bold mt-2">λ™κ±°μΈ κ²°ν•© κ°€λ¥:</p><ul><li>κ²°ν•© λ€ν‘μ κΈ°μ¤€ μ£Όλ―Όλ“±λ΅μƒ λ™μΌ μ£Όμ† λ™κ±°μΈ 1μΈ κ°€μ΅± ν• μΈ λ€μƒ μΈμ • (μλΉ„λ¶€λ¶€, λ™κ±°λ¶€λ¶€, μΉκµ¬ λ“± λ“±λ³Έμƒ λ™κ±°μΈ).</li></ul>
                        <p class="font-bold mt-2">μμ‹:</p><ul><li>μ•„λ²„μ§€ λ…μ SK ν•Έλ“ν° κ°ν†µ ν›„ μ”μ¦ κ°€μ΅± κ²°ν•©/μ¨κ°€μ΅±ν• μΈ μ¶”κ°€ κ°€λ¥ (λ¨λ°”μΌ λ…μ κ°™μ΄ λ“¤μ–΄μ™€μ•Ό ν•¨.)</li></ul>
                        <p class="mt-2 text-red-500 font-bold">μ°Έκ³ : λ¨λ°”μΌ ν• μΈμ•΅μ€ μ„ νƒμ•½μ • λ“± νƒ€ ν• μΈκ³Ό μ¤‘λ³µ μ—¬λ¶€ SKT ν™•μΈ ν•„μ”.</p>
                    </div>
                </div>
                <div id="onGajokDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">μ¨κ°€μ΅±ν• μΈ μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ (μμƒ): <span id="detailOgInternetDiscount" class="font-bold">0</span>μ›</p>
                    <p>ν΄λ€ν° ν• μΈ (μ›”μ •μ•΅ κΈ°μ¤€, μ°Έκ³ μ©): <span id="detailOgMobileDiscount" class="font-bold">0</span>%</p>
                    <hr class="my-2 border-red-300">
                    <div class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details">
                        <p class="font-bold">μ£Όμ” νΉμ§•:</p><ul><li>κ°€μ΅± κµ¬μ„±μ›μ SKT μ΄ κ°€μ… μ—°μμ— λ”°λΌ ν• μΈμ¨ μ°¨λ“± μ μ©.</li><li>κµ¬κ°„: 10λ…„ λ―Έλ§, 10λ…„ μ΄μƒ, 20λ…„ μ΄μƒ, 30λ…„ μ΄μƒ.</li></ul>
                        <p class="font-bold mt-2">μµλ€ κ²°ν•© κ°€λ¥ νμ„ :</p><ul><li>λ¨λ°”μΌ μµλ€ 5νμ„  + μΈν„°λ„· 2νμ„ .</li></ul>
                        <p class="font-bold mt-2">νμ„  μ¶”κ°€ μ΅°κ±΄:</p><ul><li>μ¶”κ°€ νμ„  λ…μμ ν΄λ€ν°μ€ SKT νμ„ μ΄μ–΄μ•Ό ν•¨.</li></ul>
                        <p class="font-bold mt-2">μΈν„°λ„· ν• μΈ (κ°€μ… μ—°μλ³„ %):</p><ul id="onGajokInternetDiscountTiers"></ul>
                        <p class="font-bold mt-2">ν΄λ€ν° ν• μΈ:</p><ul><li>μ΄ κ°€μ… μ—°μ 20λ…„ μ΄μƒ μ‹: λ€ν‘ λ¨λ°”μΌ νμ„  μ›”μ •μ•΅μ 10% ν• μΈ.</li><li>μ΄ κ°€μ… μ—°μ 30λ…„ μ΄μƒ μ‹: λ€ν‘ λ¨λ°”μΌ νμ„  μ›”μ •μ•΅μ 30% ν• μΈ.</li><li>(μ„ νƒμ•½μ •ν• μΈκ³Ό μ¤‘λ³µ κ°€λ¥)</li></ul>
                        <p class="font-bold mt-2">λ™κ±°μΈ κ²°ν•© κ°€λ¥:</p><ul><li>κ²°ν•© λ€ν‘μ κΈ°μ¤€ μ£Όλ―Όλ“±λ΅μƒ λ™μΌ μ£Όμ† λ™κ±°μΈ 1μΈ κ°€μ΅± ν• μΈ λ€μƒ μΈμ •.</li></ul>
                        <p class="font-bold mt-2">μμ‹:</p><ul><li>μ•„λ²„μ§€ λ…μ SK ν•Έλ“ν° κ°ν†µ ν›„ μ”μ¦ κ°€μ΅± κ²°ν•©/μ¨κ°€μ΅±ν• μΈ μ¶”κ°€ κ°€λ¥ (λ¨λ°”μΌ λ…μ κ°™μ΄ λ“¤μ–΄μ™€μ•Ό ν•¨.)</li></ul>
                    </div>
                </div>
                <div id="familySktDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">ν¨λ°€λ¦¬κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μνμ„  μΈν„°λ„· ν• μΈ: <span id="detailFsInternetDiscount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-red-300">
                    <div class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details">
                        <p class="font-bold">μ£Όμ” νΉμ§•:</p><ul><li>λ³ΈμΈ λλ” μ§κ³„κ°€μ΅±μ SKT/SKB μΈν„°λ„·(λ¨νμ„ )μ΄ λ‹¤λ¥Έ μ¥μ†μ— μμ„ κ²½μ°, μ‹ κ· μ¶”κ°€ μΈν„°λ„·(μνμ„ ) ν• μΈ.</li><li>SKTλ” SKTλΌλ¦¬, SKBλ” SKBλΌλ¦¬ κ²°ν•©.</li></ul>
                        <p class="font-bold mt-2">μ΅°κ±΄:</p><ul><li>λ³ΈμΈ λλ” μ§κ³„κ°€μ΅± λ…μλ΅ λ‹¤λ¥Έ μ¥μ†μ— SK μΈν„°λ„· νμ„ μ΄ μμ–΄μ•Ό ν•¨.</li></ul>
                        <p class="font-bold mt-2">νμ„  κµ¬μ„±:</p><ul><li>λ¨νμ„  1νμ„  + μνμ„  1νμ„ .</li></ul>
                        <p class="font-bold mt-2">ν• μΈμ•΅ (JSON κΈ°λ°, μνμ„  κΈ°μ¤€):</p><ul id="familyInternetDiscountTiers"></ul>
                        <p class="font-bold mt-2">μμ‹:</p><ul><li>μ•„λ²„μ§€ λ…μ SK μΈν„°λ„· μ¶”κ°€ ν•κ³  μ‹¶μ–΄ν•¨ --&gt; μ”μ¦ κ°€μ΅± κ²°ν•© λλ” μ¨κ°€μ΅± ν• μΈ λ¶κ°€ , ν¨λ°€λ¦¬ κ²°ν•© μ§„ν–‰</li></ul>
                        <p class="font-bold mt-2">μ μμ‚¬ν•­:</p><ul><li>λ¨νμ„  1λ…„ μ μ§€ ν•„μ, λ―Έμ μ§€ μ‹ ν• μΈμ•΅ λ°ν™.</li><li>10κ°μ›” μ΄λ‚΄ ν•΄μ§€ μ‹ μ‚¬μ€ν’ ν™μ κ°€λ¥.</li></ul>
                        <p class="font-bold mt-2">κ²°ν•© λ°©λ²•:</p><ul><li>SKT: λ³ΈμΈ μ‹ λ¶„μ¦, λ¨νμ„  κ°€μ΅±κ΄€κ³„μ¦λ…μ„, λ¨νμ„  μ •λ³΄λ΅ μ„ κ²°ν•© κ°€λ¥.</li><li>SKB λ³ΈμΈ ν¨λ°€λ¦¬: SKTμ™€ λ™μΌ, μ„ κ²°ν•© κ°€λ¥.</li><li>SKB νƒ€μΈ ν¨λ°€λ¦¬: λ³Έμ‚¬λ¥Ό ν†µν• ν›„κ²°ν•©λ§ κ°€λ¥.</li></ul>
                    </div>
                </div>
                <div id="mvnoSktDetailsContainer" class="mt-3 hidden discount-details">
                    <p class="font-semibold mb-1">μ•λ°ν• κ²°ν•© μƒμ„Έ (μƒλ‹΄μ› μ°Έκ³ μ©):</p>
                    <p>μΈν„°λ„· ν• μΈ: <span id="detailMsInternetDiscount" class="font-bold">0</span>μ›</p>
                    <hr class="my-2 border-red-300">
                    <div class="text-xs mt-2 mb-1 text-red-700 font-semibold skt-summary-details">
                        <p class="font-bold">μ£Όμ” νΉμ§•:</p><ul><li>SKB μΈν„°λ„· + λ³ΈμΈ λ…μ μ•λ°ν° 1:1 κ²°ν•© (SKBλ§ κ°€λ¥).</li></ul>
                        <p class="font-bold mt-2">λ€μƒ:</p><ul><li>30μΌ μ΄λ‚΄ SKB μ‹ κ· κ°€μ… κ³ κ° λλ” SKB μ•½μ • μΆ…λ£ κ³ κ°.</li></ul>
                        <p class="font-bold mt-2">ν• μΈμ•΅ (JSON κΈ°λ°, μΈν„°λ„· μ†λ„λ³„):</p><ul id="mvnoInternetDiscountTiers"></ul>
                        <p class="font-bold mt-2">κ²°ν•© λ¶κ°€:</p><ul><li>SKT λ° λ²•μΈ νμ„ .</li><li>μ„ λ¶ν°, IOT μ”κΈμ , λ°μ΄ν„° μ‰μ–΄λ§, νƒλΈ”λ¦Ώ λ“± λ―Έν‘μ μ”κΈμ .</li><li>μ•λ°ν° ν†µμ‹ μ‚¬ λ³€κ²½ μ‹ μ¬κ²°ν•© λ¶κ°€.</li></ul>
                        <p class="font-bold mt-2">κ²°ν•© κ°€λ¥ μ•λ°ν° μ‚¬μ—…μ (μμ‹):</p><ul><li>KB κµ­λ―Όμ€ν–‰(λ¦¬λΈμ— λ¨λ°”μΌ), ν°μ‚¬λμ»¤λ„¥νΈ(μ΄μ•ΌκΈ°λ¨λ°”μΌ), μ λ‹μ»΄μ¦(λ¨λΉ™), ν† μ¤, μ•„μ΄μ¦λΉ„μ „, SKν…”λ§ν¬(μ„ΈλΈλ¨λ°”μΌ), ν‹°ν”λ¬μ¤(KTC), μ¤λ§ν…” λ“± (μ „μ²΄ λ©λ΅ SKB ν™•μΈ).</li></ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <div class="input-group">
                <label class="input-label">λ¨λ°”μΌ νμ„  μ •λ³΄ (μµλ€ 5νμ„ )</label>
                <div class="flex items-center mb-2">
                    <label for="mobileLinesCount" class="mr-2 text-sm text-slate-700">κ²°ν•©ν•  SKT λ¨λ°”μΌ νμ„  μ:</label>
                    <input type="number" id="mobileLinesCount" min="0" max="5" value="0" class="input-field w-20 text-center">
                </div>
                <div id="mobileLinesContainer" class="space-y-3"></div>
            </div>
             <div class="input-group">
                <label for="dongpanSalesCheck" class="input-label flex items-center cursor-pointer">
                    <input type="checkbox" id="dongpanSalesCheck" class="radio-input h-5 w-5 mr-2">
                    λ™ν νλ§¤κ°€ μ μ© (μ„ νƒ μ‹ μ¶”κ°€ μ‚¬μ€ν’ μ΅°κ±΄ λ° κ΄€λ ¨ μ•λ‚΄ λ³΄κΈ°)
                </label>
            </div>
            <div id="dongpanUsimPolicyDetailsContainer" class="mt-3 hidden discount-details">
                <h3 class="text-lg font-bold text-red-700 mb-2">SKT μΈν„°λ„·/μ μ‹¬ κ²°ν•© μƒν’ μ ‘μ λ°©λ²• (λ™νμ μ‹¬ μ°Έκ³ μλ£)</h3>
                <p class="text-xs mb-1"><strong>μ‹ μ²­μ„ URL:</strong> <a href="https://tgateplus.sktelecom.com/main/main.do?p=9d7d8b5b0b339b80214797b42ff596a914f9d2a8103175f5b4e3a208ea7e3cab" target="_blank" class="text-blue-600 hover:underline">Tκ²μ΄νΈν”λ¬μ¤ μ‹ μ²­ λ°”λ΅κ°€κΈ°</a></p>
                <p class="text-xs mb-3">μ‘μ„±μΌ: 2023λ…„ 10μ›” 27μΌ κΈ°μ¤€ (μµμ‹  μ •μ±…μ€ SKT κ³µμ‹ μ±„λ„μ„ ν†µν•΄ ν™•μΈν•μ‹κΈ° λ°”λλ‹λ‹¤)</p>
                <h4>κ²°ν•© μƒν’ κµ¬μ„± λ° κ°€λ¥ νμ„ :</h4>
                <ul><li>SKT μΈν„°λ„·κ³Ό μ μ‹¬μ„ κ²°ν•©ν•λ” μƒν’μ…λ‹λ‹¤.</li><li>κ°€μ΅± μ μ‹¬ κ²°ν•© μ‹, μ΄ 5νμ„ (μΈν„°λ„· 1νμ„  + μ μ‹¬ λ™λ° λ…μμ 1νμ„  + κ°€μ΅± μ μ‹¬ μµλ€ 4νμ„ )κΉμ§€ κ°€λ¥ν•©λ‹λ‹¤. <strong>β οΈ μΈ+μ μ‹¬λ™ν+κ°€μ΅±μ μ‹¬4νμ„  κΉμ§€ μ΄ 5νμ„ κΉμ§€ κ°€λ¥</strong></li></ul>
                <h4>λ‹¨λ… μƒν’ νλ§¤ λ¶κ°€ μ •μ±…:</h4>
                <ul><li>μΈν„°λ„· λ‹¨λ…μΌλ΅λ” 33,000μ› μ”κΈμ  νλ§¤ λ° κ°€μ΅± μ μ‹¬ νλ§¤κ°€ λ¶κ°€ν•©λ‹λ‹¤. <strong>β οΈ μΈλ‹¨λ… > 33K νλ§¤ λ¶κ°€/κ°€μ΅± μ μ‹¬ νλ§¤ λ¶κ°€</strong></li><li>λ²λ“¤(κ²°ν•©) μƒν’μ κ²½μ°, λ¨λ“  μ”κΈμ μ™€ κ°€μ΅± μ μ‹¬ νλ§¤κ°€ κ°€λ¥ν•©λ‹λ‹¤. <strong>β οΈ λ²λ“¤> λ¨λ“  μ”κΈμ  + κ°€μ΅± μ μ‹¬ νλ§¤ κ°€λ¥</strong></li></ul>
                <h4>μ ‘μ μ μ°¨:</h4><ol class="list-decimal list-inside space-y-1"><li>μ„ μ‹ μ²­μ„ λ§ν¬λ΅ μΈμ¦(PASS or μ‹ μ©μΉ΄λ“) ν›„ μ‹ μ²­μ„ μ‘μ„±.</li><li>λ°±λ©”κ°€ μ ‘μμ›Ή(speedonline.kr)μ SK(μΌλ°) β‡’ λ¨λ°”μΌ νƒ­μΌλ΅ μ ‘μ λ¶€νƒ λ“λ¦½λ‹λ‹¤.</li><li>μ›Ή νμ‹ :<ul class="list-disc list-inside ml-4"><li>ν•΄λ‹Ή κ³ κ° μΈν„°λ„· κ°ν†µμ΄ μ™„λ£λλ©΄: "[κ°ν†µ μ™„λ£ / μ μ‹¬ λ°μ†΅ μ”μ²­]"μΌλ΅ μ›Ή νμ‹  ν•„μ”.</li><li>β€» μ΄λ―Έ κ°ν†µλ κ³ κ° 30μΌ μ΄λ‚΄ μ μ‹¬λ™ν μ‹: "[κ°ν†µμ™„λ£ μΌμ, κ°ν†µλ²νΈ κΈ°μ¬ / μ μ‹¬ λ°μ†΅ μ”μ²­]"μΌλ΅ μ›Ή νμ‹  ν•„μ”.</li><li>κ³ κ°μ΄ μ μ‹¬ μλ Ήν•μ‹  ν›„ λ―Έμ†λ΅ κ°ν†µ μ”μ²­ μ‹: "[κ³ κ° μ μ‹¬ μλ Ή μ™„λ£ / κ°ν†µ μ§„ν–‰ μ”μ²­]" ν•„μ”.</li></ul></li><li>μ‚¬μ „ λ™μ λ¬Έμ μ²λ¦¬:<ul class="list-disc list-inside ml-4"><li>β€» κ°ν†µ μ”μ²­ν•λ©΄ [μ‚¬μ „λ™μλ¬Έμ:μ„μ•½κΈ ν™•μΈ λ° λ™μλ¬Έμ]κ°€ κ³ κ°μ—κ² λ°μ†΅λλ©°, ν•΄λ‹Ή λ¬Έμ μ²λ¦¬ ν›„ κ°ν†µ μ§„ν–‰ κ°€λ¥.</li><li>β€» λ™μ μ²λ¦¬ν•μ§€ μ•μ„ μ‹ λ¬Έμ λ°μ†΅ ν›„ 10λ¶„ μ „μ‚°μ—μ„ κ°•μ λ΅ λ™μμ²λ¦¬ ν›„ κ°ν†µμ§„ν–‰ κ°€λ¥.</li></ul></li><li>μλ Ήν• USIMμΌλ΅ κ°μ•„λΌμ°μ‹κ³  μ „μ› ONμ— μ„±κ³µν•μ‹λ©΄ μ„ νƒμ•½μ •κ³Ό μ λ¬΄μ„  κ²°ν•© μ§„ν–‰ ν•„μ.</li><li>β€» μ„ μ•½ λ° κ²°ν•© μ™„λ£μ‹ [κ°ν†µμ™„λ£]λ΅ μ²λ¦¬λ¨.</li></ol>
                <h4>κ³ κ° μ•λ‚΄ μ‚¬ν•­:</h4><ol class="list-decimal list-inside space-y-1"><li>μ μ‹¬ κ°ν†µμ€ μμ°¨μ μΌλ΅ μ§„ν–‰λμ–΄ μµλ€ 1μ‹κ°„ κΉμ§€ μ†μ”λ  μ μμµλ‹λ‹¤.</li><li>μ‚¬μ „ λ™μ λ¬Έμ μ²λ¦¬κ°€ μ™„λ£λμ–΄μ•Ό λΉ λ¥Έ κ°ν†µ μ²λ¦¬κ°€ κ°€λ¥ν•©λ‹λ‹¤.</li><li>SK USIM μΌλ΅ κ°ν†µλκΈ° μ „κΉμ§€λ” κΈ°μ΅΄ USIMμ„ μ‚¬μ©ν•μ‹λ‹¤κ°€ κΈ°μ΅΄ USIMμ μ‹ νΈκ°€ λμ–΄μ§ κ²½μ° μλ Ήν•μ‹  USIMμΌλ΅ κ°μ•„ λΌμ›μ£Όμ„Έμ”.</li><li>κΈ°κΈ° μ¬μ‹λ™μ„ μ—¬λ¬λ² ν•΄μ£Όμ‹λ©΄ μ •μƒ κ°ν†µμ΄ μ™„λ£λ©λ‹λ‹¤.</li></ol>
                <h4>μ£Όμ μ‚¬ν•­ (μμλ£ μ§€κΈ‰ κ΄€λ ¨):</h4><ol class="list-decimal list-inside space-y-1"><li>μ μ‹¬ λ‹ΉμΌ λ°μ†΅μ€ 15μ‹ 30λ¶„μ— λ§κ°λ©λ‹λ‹¤. μ΄ν›„ μ”μ²­κ±΄ μμ—…μΌ κΈ°μ¤€ μµμΌ μ§„ν–‰λ©λ‹λ‹¤.</li><li>μ μ‹¬ λΉ„μ© 7,700μ›μ΄ μ²« λ‹¬μ— μ²­κµ¬λ©λ‹λ‹¤.</li><li>μΈν„°λ„· / μ μ‹¬ μ¤‘ ν•λ‚λΌλ„ μ„¤λ¶ λ° κ°ν†µ λ¶κ°€μ‹ μμλ£ μ§€κΈ‰ λ¶κ°€ν•©λ‹λ‹¤.</li><li>μΈν„°λ„· κ°ν†µμ›” κΈ°μ¤€ μµμ›”λ§κΉμ§€ μ μ‹¬ κ°ν†µμ‹μ—λ§ μμλ£ μΈμ •λμ–΄ μ§€κΈ‰λ©λ‹λ‹¤.</li><li>μ„ νƒμ•½μ • μ μ© μ•λ  κ²½μ° μμλ£ μ§€κΈ‰ λ¶κ°€ν•©λ‹λ‹¤.</li><li>μΈν„°λ„· λ…μμμ™€ μ μ‹¬ λ…μμκ°€ μƒμ΄ν•  κ²½μ° μμλ£ μ§€κΈ‰ λ¶κ°€ν•©λ‹λ‹¤.</li></ol>
                <p class="mt-2"><strong>κ²°λ΅ :</strong> SKT μΈν„°λ„·/μ μ‹¬ κ²°ν•© μƒν’μ€ κ°€μ΅± μ μ‹¬ κ²°ν•© μ‹ μµλ€ 5νμ„ κΉμ§€ κ°€λ¥ν•λ©°, λ‹¨λ… μƒν’ νλ§¤μ— μ μ•½μ΄ μμµλ‹λ‹¤. μ ‘μλ” μ¨λΌμΈ μ‹ μ²­μ„ μ‘μ„± λ° μ›Ή μ ‘μλ¥Ό ν†µν•΄ μ§„ν–‰λλ©°, κ³ κ°μ μ‚¬μ „ λ™μ λ¬Έμ μ²λ¦¬μ™€ μ μ‹¬ κµμ²΄ λ° κ°ν†µ κ³Όμ •μ΄ ν•„μμ μ…λ‹λ‹¤. νΉν, μμλ£ μ§€κΈ‰κ³Ό κ΄€λ ¨ν•μ—¬ μ μ‹¬ κ°ν†µ κΈ°κ°„, μ„ νƒμ•½μ • μ μ©, λ…μμ μΌμΉ μ—¬λ¶€ λ“± μ—¬λ¬ μ μμ‚¬ν•­μ΄ μμΌλ―€λ΅ ν•΄λ‹Ή λ‚΄μ©μ„ μ™μ§€ν•κ³  μ ‘μ λ° κ°ν†µμ„ μ§„ν–‰ν•΄μ•Ό ν•©λ‹λ‹¤.</p>
            </div>
        </section>

        <section id="installationSection" class="mb-8">
            <h2 class="section-title">3. μ„¤μΉ μµμ…</h2>
            <div class="input-group bg-white p-6 rounded-lg shadow">
                <label class="input-label">μ„¤μΉλΉ„</label>
                <div class="space-y-2">
                    <label class="radio-label"><input type="radio" name="installationTime" value="promo_waiver" class="radio-input"> μ„¤μΉλΉ„ λ©΄μ  ν”„λ΅λ¨μ…</label>
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekday" class="radio-input" checked> ν‰μΌ μ£Όκ°„</label>
                    <label class="radio-label"><input type="radio" name="installationTime" value="weekend" class="radio-input"> μ£Όλ§/μ•Όκ°„</label>
                </div>
            </div>
        </section>

        <div class="text-center mb-8 space-x-4">
            <button id="calculateButton" class="btn-primary text-lg">μμƒ μ”κΈ κ³„μ‚°ν•κΈ°</button>
            <button id="resetButton" class="btn-secondary text-lg">μ΄κΈ°ν™”</button>
        </div>

        <section id="resultSection" class="hidden">
            <h2 class="section-title">π“ κ³„μ‚° κ²°κ³Ό</h2>
            
            <div class="bg-slate-50 p-6 rounded-lg mb-6 border border-slate-200">
                <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">β… μµμΆ… μ”κΈ λ° ννƒ μ”μ•½</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="text-center p-4 bg-white rounded-md shadow-sm">
                        <p class="text-base font-medium text-slate-600">π–¥οΈ μΈν„°λ„·/TV μ›” μµμΆ… μ”κΈ</p>
                        <p id="summaryMonthlyCost" class="text-3xl font-extrabold text-red-500 my-1">0μ›</p>
                    </div>
                    <div class="text-center p-4 bg-green-50 rounded-md shadow-sm">
                        <p class="text-base font-medium text-green-800">π μ΄ μ‚¬μ€ν’ ννƒ</p>
                        <p id="summaryTotalGift" class="text-3xl font-extrabold text-green-600 my-1">0μ›</p>
                    </div>
                </div>
                <hr class="my-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="text-center">
                        <p class="text-sm text-slate-500">μΈν„°λ„· μ”κΈ ν• μΈ</p>
                        <p id="summaryInternetDiscount" class="text-lg font-bold text-green-600">- 0μ›</p>
                    </div>
                    <div class="text-center">
                        <p class="text-sm text-slate-500">ν΄λ€ν° μ”κΈ ν• μΈ (μ›”)</p>
                        <p id="summaryMobileDiscount" class="text-lg font-bold text-green-600">- 0μ›</p>
                        <p class="text-xs text-slate-400">(ν†µμ‹ λΉ„ μ²­κµ¬μ„μ—μ„ λ³„λ„ μ°¨κ°)</p>
                    </div>
                </div>
            </div>
            
            <div class="text-center mb-6">
                 <button id="toggleDetailsButton" class="text-sm text-slate-500 hover:text-slate-700 bg-slate-100 hover:bg-slate-200 py-2 px-4 rounded-full transition-colors">
                    μƒμ„Έ μ”κΈ λ‚΄μ—­ νΌμ³λ³΄κΈ° β–Ό
                 </button>
            </div>

            <div id="detailsContainer" class="hidden">
                <div class="result-card">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">μ„ νƒ μƒν’ μƒμ„Έ</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <p class="result-label summary-item">μ„ νƒ μΈν„°λ„·: <span id="selectedInternet" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ TV (1λ²μ§Έ): <span id="selectedTv" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ μ¶”κ°€ AI/νΉμ μ…‹ν†± (1λ²μ§Έ TV): <span id="selectedStb" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ μ¶”κ°€ TV (2λ²μ§Έ): <span id="selectedAdditionalTv" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ μ§‘μ „ν™”: <span id="selectedPhone" class="result-value"></span></p>
                            <p class="result-label summary-item">μ„ νƒ μ™€μ΄νμ΄: <span id="selectedWifi" class="result-value"></span></p>
                        </div>
                        <div>
                             <p class="result-label summary-item">λ¨λ°”μΌ νμ„  μ: <span id="selectedMobileCount" class="result-value"></span></p>
                             <p class="result-label summary-item">μ μ© ν• μΈ μ ν•: <span id="selectedDiscountType" class="result-value"></span></p>
                             <div id="onGajokYearsResultContainer" class="hidden result-label summary-item">
                                 μ¨κ°€μ΅± μ΄ μ‚¬μ© μ—°μ: <span id="selectedOnGajokYears" class="result-value"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="result-card">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">μΈν„°λ„·/TV μ”κΈ κ³„μ‚° κ³Όμ •</h3>
                    <p class="result-label summary-item">μ›” μΈν„°λ„· κΈ°λ³Έλ£ (λ‹¨λ…/TVκ²°ν•© κΈ°μ¤€): <span id="totalBaseInternetCost" class="result-value">0</span> μ›</p>
                    <p class="result-label summary-item">μ›” μ™€μ΄νμ΄ κ³µμ κΈ° μ„λ€λ£: <span id="wifiRouterRentalCostDisplay" class="result-value">0</span> μ›</p>
                    <div id="tvCostSummaryContainer" class="hidden"> 
                        <p class="result-label summary-item">μ›” TV μ”κΈ (1λ²μ§Έ, κΈ°λ³Έμ…‹ν†± ν¬ν•¨): <span id="tvBaseCostDisplay" class="result-value">0</span> μ›</p>
                        <p class="result-label summary-item">μ›” μ¶”κ°€ AI/νΉμ μ…‹ν†± μ„λ€λ£ (1λ²μ§Έ): <span id="stbRentalCostDisplay" class="result-value">0</span> μ›</p>
                    </div>
                    <div id="additionalTvCostSummaryContainer" class="hidden">
                        <p class="result-label summary-item">μ›” μ¶”κ°€ TV μ”κΈ (2λ²μ§Έ): <span id="additionalTvCostDisplay" class="result-value">0</span> μ›</p>
                    </div>
                    <div id="phoneCostSummaryContainer" class="hidden">
                        <p class="result-label summary-item">μ›” μ§‘μ „ν™” κΈ°λ³Έλ£: <span id="phoneBaseCostDisplay" class="result-value">0</span> μ›</p>
                    </div>
                    <hr class="my-2 border-slate-200">
                    <p class="result-label text-green-600 summary-item">μ›” μ΄ μΈν„°λ„· κ²°ν•© ν• μΈμ•΅ (μμƒ): <span id="totalInternetDiscountAmount" class="result-value text-green-600">0</span> μ›</p>
                    <p class="text-xs text-slate-500 ml-2 mb-2" id="internetDiscountBreakdown"></p>
                    <hr class="my-2 border-red-300">
                    <p class="mt-2 text-lg font-semibold">
                        <span id="finalCostLabelText">μµμΆ… μμƒ μ›” λ‚©λ¶€μ•΅</span><span id="finalCostLabelQualifier" class="cost-qualifier"></span>: <span id="finalMonthlyCost" class="total-value">0</span> μ›
                    </p>
                </div>

                <div class="result-card">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">π μ‚¬μ€ν’ ννƒ μƒμ„Έ</h3>
                    <p class="result-label summary-item">κΈ°λ³Έ μΈν„°λ„· μ‚¬μ€ν’ (μμƒ): <span id="giftBaseInternet" class="result-value">0</span> μ›</p>
                    <p class="result-label summary-item hidden" id="additionalDongpanCashContainer">λ™ν μ¶”κ°€ ν„κΈ μ‚¬μ€ν’ (λ¨λ°”μΌ μ”κΈμ  μ—°λ™ ν•©κ³„): <span id="giftAdditionalDongpanCash" class="result-value">0</span> μ›</p>
                    <hr class="my-1">
                    <p class="result-label summary-item font-semibold">μ΄ μ‚¬μ€ν’ κ°€μΉ (μμƒ): <span id="giftTotal" class="result-value text-green-600">0</span> μ›</p>
                    <p class="text-xs text-red-500 mt-1" id="giftEligibilityNote"></p>
                </div>
                
                <div id="mobileDiscountDetailsContainer" class="result-card hidden">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">π“± λ¨λ°”μΌ μ”κΈ ν• μΈ μƒμ„Έ</h3>
                    <div id="mobileDiscountBreakdown" class="space-y-2 text-sm">
                    </div>
                    <p id="mobileDiscountNote" class="text-xs text-slate-500 mt-2"></p>
                </div>

                <div class="result-card">
                    <h3 class="text-xl font-semibold text-orange-600 mb-3">μ΄κΈ° μ„¤μΉ λΉ„μ©</h3>
                    <p class="result-label">μμƒ μ΄ μ„¤μΉλΉ„: <span id="installationCostResult" class="result-value text-lg">0</span> μ›</p>
                    <p class="text-xs text-slate-500 mt-1" id="installationCostDescription"></p>
                </div>
            </div>
        </section>
        
        <section id="messageScriptSection" class="hidden mt-12">
            <h2 class="section-title">π“„ κ³ κ° μ•λ‚΄ λ¬Έμ μ¤ν¬λ¦½νΈ (μƒλ‹΄μ› μ°Έκ³ μ©)</h2>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">1. μ „μ‚° λ©”λ¨</h3>
                <textarea id="memoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('memoScript', 'copyFeedbackMemo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button><span id="copyFeedbackMemo" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">2. μƒν’ μ•λ‚΄ λ¬Έμ</h3>
                <textarea id="infoScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('infoScript', 'copyFeedbackInfo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button><span id="copyFeedbackInfo" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">3. κ°€μ… μ™„λ£ λ¬Έμ</h3>
                <textarea id="completeScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('completeScript', 'copyFeedbackComplete')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button><span id="copyFeedbackComplete" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">4. μ μ‹¬ μ ‘μ μ™„λ£ μ•λ‚΄ (κ³ κ°μ©)</h3>
                <textarea id="usimDongpanCompleteScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container"><button onclick="copyToClipboard('usimDongpanCompleteScript', 'copyFeedbackUsimComplete')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button><span id="copyFeedbackUsimComplete" class="copy-feedback"></span></div>
            </div>
            <div class="result-card">
                <h3 class="text-xl font-semibold text-orange-600 mb-3">6. λ―Όκ°μ •λ³΄ μ „μ†΅μ© λ§ν¬ (κ³ κ° λ°μ†΅μ©)</h3>
                <textarea id="sensitiveInfoLinkScript" class="message-script-area" readonly></textarea>
                <div class="copy-button-container">
                    <button onclick="copyToClipboard('sensitiveInfoLinkScript', 'copyFeedbackSensitiveInfo')" class="btn-secondary text-xs">λ³µμ‚¬ν•κΈ°</button>
                    <span id="copyFeedbackSensitiveInfo" class="copy-feedback"></span>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center p-6 mt-12 bg-red-700 text-red-100 text-sm">
        <p>λ³Έ κ³„μ‚°κΈ°λ” SKB/SKT λ―Έμ†μ—μ„ μ κ³µν•©λ‹λ‹¤.</p>
        <p>&copy; 2024 SK κ²°ν•© ν• μΈ κ³„μ‚°κΈ°. λ¨λ“  μ •λ³΄λ” μ°Έκ³ μ©μ…λ‹λ‹¤.</p>
    </footer>

    <script>
    // --- (μ‹ κ· μ¶”κ°€) λ¨λ°”μΌ μ”κΈμ  λ°μ΄ν„° ---
    const mobilePlanTiers = {
        "80K": [ { "plan_name": "5GX ν”„λΌμ„ν”λ¬μ¤", "network_type": "5G", "price": "β‚©99,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00007622" }, { "plan_name": "5GX ν”„λΌμ„", "network_type": "5G", "price": "β‚©89,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006404" }, { "plan_name": "0 μ²­λ…„ 99 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©99,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008139" }, { "plan_name": "0 μ²­λ…„ 89 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©89,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008140" }, { "plan_name": "Tν”λ λ§¥μ¤", "network_type": "LTE", "price": "β‚©100,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006539" }, { "plan_name": "Tν”λ μ¤νμ…", "network_type": "LTE", "price": "β‚©79,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00007301" } ],
        "69K": [ { "plan_name": "5GX λ κ·¤λ¬", "network_type": "5G", "price": "β‚©69,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006538" }, { "plan_name": "5GX λ κ·¤λ¬ν”λ¬μ¤", "network_type": "5G", "price": "β‚©79,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008141" }, { "plan_name": "0 μ²­λ…„ 79 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©79,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008142" }, { "plan_name": "0 μ²­λ…„ 69 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©69,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006537" }, { "plan_name": "Tν”λ μ—μ„Όμ¤", "network_type": "LTE", "price": "β‚©69,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00007620" } ],
        "33K": [ { "plan_name": "λ² μ΄μ§", "network_type": "5G", "price": "β‚©49,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00007621" }, { "plan_name": "λ² μ΄μ§ν”λ¬μ¤", "network_type": "5G", "price": "β‚©59,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006402" }, { "plan_name": "μ¬λ¦Ό", "network_type": "5G", "price": "β‚©55,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008145" }, { "plan_name": "0μ²­λ…„ 59 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©59,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00008145" }, { "plan_name": "0μ²­λ…„ 49 (λ§ 34μ„Έ μ΄ν•)", "network_type": "5G", "price": "β‚©49,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006817" }, { "plan_name": "0ν‹΄ 5G (λ§ 18μ„Έ μ΄ν•)", "network_type": "5GX", "price": "β‚©45,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006536" }, { "plan_name": "Tν”λ μ•μ‹¬ 4G", "network_type": "LTE", "price": "β‚©50,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006535" }, { "plan_name": "Tν”λ μ•μ‹¬ 2.5G", "network_type": "LTE", "price": "β‚©43,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006534" }, { "plan_name": "Tν”λμ„Έμ΄λΈ", "network_type": "LTE", "price": "β‚©33,000", "url": "https://m.tworld.co.kr/product/callplan?prod_id=NA00006534" } ]
    };
    let allMobilePlans = [];
    
    // --- New JSON Data Structure ---
    const jsonData = {
        "internetPlans_base": [{"id": "internet_100m_standalone","name": "100M μΈν„°λ„· (λ‹¨λ…)","price": 22000,"speed_mbps": 100,"note": "λ‹¨λ… κΈ°λ³Έλ£"}, {"id": "internet_500m_standalone","name": "500M μΈν„°λ„· (λ‹¨λ…)","price": 33000,"speed_mbps": 500,"note": "λ‹¨λ… κΈ°λ³Έλ£"}, {"id": "internet_1g_standalone","name": "1GB μΈν„°λ„· (λ‹¨λ…)","price": 38500,"speed_mbps": 1000,"note": "λ‹¨λ… κΈ°λ³Έλ£"}],
        "internetPlans_tv_bundle_prices": [{"id": "internet_100m_with_tv","name": "100M μΈν„°λ„· (TV κ²°ν•© μ‹)","price": 19800,"speed_mbps": 100,"note": "TV κ²°ν•© μ‹ μΈν„°λ„· μµμΆ…κ°€ μ¶”μ •"}, {"id": "internet_500m_with_tv","name": "500M μΈν„°λ„· (TV κ²°ν•© μ‹)","price": 27500,"speed_mbps": 500,"note": "TV κ²°ν•© μ‹ μΈν„°λ„· μµμΆ…κ°€ μ¶”μ •"}, {"id": "internet_1g_with_tv","name": "1GB μΈν„°λ„· (TV κ²°ν•© μ‹)","price": 33000,"speed_mbps": 1000,"note": "TV κ²°ν•© μ‹ μΈν„°λ„· μµμΆ…κ°€ μ¶”μ •"}],
        "tvPackages": [{"id": "tv_economy_smart3","name": "B tv μ΄μ½”λ…Έλ―Έ (183μ±„λ„) + μ¤λ§νΈ3","price": 14300,"channels": 183,"stb": "μ¤λ§νΈ3"}, {"id": "tv_standard_smart3","name": "B tv μ¤νƒ λ‹¤λ“ (234μ±„λ„) + μ¤λ§νΈ3","price": 17600,"channels": 234,"stb": "μ¤λ§νΈ3"}, {"id": "tv_all_smart3","name": "B tv ALL (257μ±„λ„) + μ¤λ§νΈ3","price": 20900,"channels": 257,"stb": "μ¤λ§νΈ3"}, {"id": "tv_standard_netflix_2p","name": "B tv μ¤νƒ λ‹¤λ“ λ„·ν”λ¦­μ¤ (2μΈ/1080p)","price": 29900,"note": "λ™μ‹μ‹μ²­ 2μΈ/ν•΄μƒλ„ 1080p","base_tv_plan": "μ¤νƒ λ‹¤λ“","netflix_tier": "μ¤νƒ λ‹¤λ“"}, {"id": "tv_standard_netflix_premium_4p","name": "B tv μ¤νƒ λ‹¤λ“ λ„·ν”λ¦­μ¤ ν”„λ¦¬λ―Έμ—„ (4μΈ/4K+HDR)","price": 32900,"note": "λ™μ‹μ‹μ²­ 4μΈ/ν•΄μƒλ„ 4K+HDR","base_tv_plan": "μ¤νƒ λ‹¤λ“","netflix_tier": "ν”„λ¦¬λ―Έμ—„"}, {"id": "tv_all_netflix_2p","name": "B tv ALL λ„·ν”λ¦­μ¤ (2μΈ/1080p)","price": 32400,"note": "λ™μ‹μ‹μ²­ 2μΈ/ν•΄μƒλ„ 1080p","base_tv_plan": "ALL","netflix_tier": "μ¤νƒ λ‹¤λ“"}, {"id": "tv_all_netflix_premium_4p","name": "B tv ALL λ„·ν”λ¦­μ¤ ν”„λ¦¬λ―Έμ—„ (4μΈ/4K+HDR)","price": 35400,"note": "λ™μ‹μ‹μ²­ 4μΈ/ν•΄μƒλ„ 4K+HDR","base_tv_plan": "ALL","netflix_tier": "ν”„λ¦¬λ―Έμ—„"}],
        "additionalTvPackages": [{"id": "addtv_economy_smart3","name": "μ¶”κ°€TV μ΄μ½”λ…Έλ―Έ (183μ±„λ„) + μ¤λ§νΈ3","price": 8250}, {"id": "addtv_economy_apple","name": "μ¶”κ°€TV μ΄μ½”λ…Έλ―Έ (μ• ν”μ…‹νƒ‘)","price": 8250}, {"id": "addtv_standard_smart3","name": "μ¶”κ°€TV μ¤νƒ λ‹¤λ“ (234μ±„λ„) + μ¤λ§νΈ3","price": 9900}, {"id": "addtv_standard_apple","name": "μ¶”κ°€TV μ¤νƒ λ‹¤λ“ (μ• ν”μ…‹νƒ‘)","price": 9900}, {"id": "addtv_all_smart3","name": "μ¶”κ°€TV ALL (257μ±„λ„) + μ¤λ§νΈ3","price": 11550}, {"id": "addtv_all_apple","name": "μ¶”κ°€TV ALL (μ• ν”μ…‹νƒ‘)","price": 11550}],
        "phonePlans": [{"id": "phone_landline","name": "μΌλ° μ „ν™”","price": 1100}, {"id": "phone_070_internet_only_no_device_rental","name": "070 μ „ν™” (μΈν„°λ„·+μ „ν™” / λ‹¨λ§κΈ° λ€μ—¬ X)","price": 4400,"condition": "μΈν„°λ„·+μ „ν™”, λ‹¨λ§κΈ° λ€μ—¬ X"}, {"id": "phone_070_internet_tv_no_device_rental","name": "070 μ „ν™” (μΈν„°λ„·+TV+μ „ν™” / λ‹¨λ§κΈ° λ€μ—¬ X)","price": 2200,"condition": "μΈν„°λ„·+TV+μ „ν™”, λ‹¨λ§κΈ° λ€μ—¬ X"}],
        "addOnServices": [{"id": "wifi_router_default","name": "μ™€μ΄νμ΄ κ³µμ κΈ°","price": 1100, "url": ""}, {"id": "wifi_router_yozoom_100M_tv","name": "μ”μ¦μ°λ¦¬μ§‘κ²°ν•©(μΈ+ν‹° 100Mb) μ‹ κ³µμ κΈ°","price": 2200,"condition": "μ”μ¦μ°λ¦¬μ§‘κ²°ν•© μΈ+ν‹° 100Mb", "url": ""}, {"id": "wifi_router_not_selected","name": "κ³µμ κΈ° μ„ νƒ μ•ν•¨(X)","price": 0, "url": ""}, {"id": "wings_amplifier","name": "WINGS (μ¦ν­κΈ°)","price": 1650, "url": ""}, {"id": "nugu2_stb","name": "Nugu2 (AI μ…‹ν†±λ°•μ¤)","price": 2200,"type": "AI STB"}, {"id": "ai_soundbar_max_stb","name": "AI μ‚¬μ΄λ“λ°” λ§¥μ¤","price": 6600,"type": "AI STB"}, {"id": "apple_tv_stb_promo","name": "μ• ν”μ…‹νƒ‘ (ν”„λ΅λ¨μ… μ§„ν–‰ μ¤‘)","price": 0,"type": "STB","note": "ν”„λ΅λ¨μ… ν™•μΈ ν•„μ”"}, {"id": "ai4_vision_stb", "name": "AI4 Vision", "price": 4400, "type": "STB"}],
        "bundleInternetDiscounts": [{"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "100M + TV","discount_amount": 3300}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "100M + TV","discount_amount": 3300}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "100M + TV","discount_amount": 3300}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "500M + TV","discount_amount": 6600}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "500M + TV","discount_amount": 5500}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "500M + TV","discount_amount": 6600}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "1GB + TV","discount_amount": 8800}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "1GB + TV","discount_amount": 5500}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "1GB + TV","discount_amount": 8800}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "100M (λ‹¨λ…)","discount_amount": 4400}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "100M (λ‹¨λ…)","discount_amount": 5500}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "100M (λ‹¨λ…)","discount_amount": 4400}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "500M (λ‹¨λ…)","discount_amount": 11000}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "500M (λ‹¨λ…)","discount_amount": 11000}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "500M (λ‹¨λ…)","discount_amount": 11000}, {"bundle_name": "μ”μ¦κ°€μ΅±κ²°ν•©","condition": "1GB (λ‹¨λ…)","discount_amount": 13200}, {"bundle_name": "ν¨λ°€λ¦¬κ²°ν•©","condition": "1GB (λ‹¨λ…)","discount_amount": 11000}, {"bundle_name": "μ•λ°ν• κ²°ν•©","condition": "1GB (λ‹¨λ…)","discount_amount": 13200}],
        "installationFees": {
            "weekday": {
                "internet_100_500_standalone": 34100,
                "internet_tv": 34100,
                "internet_tv_add": 34100,
                "internet_phone_landline": 44000,
                "internet_phone_voip": 37400,
                "internet_1g_standalone": 0,
                "internet_1g_tv": 0
            },
            "weekend": {
                "internet_100_500_standalone": 42625,
                "internet_tv": 42625,
                "internet_tv_add": 42625,
                "internet_phone_landline": 51700,
                "internet_phone_voip": 45100,
                "internet_1g_standalone": 0,
                "internet_1g_tv": 0
            },
            "promo_waiver": 0,
            "descriptions": {
                "internet_100_500_standalone": "μΈν„°λ„· 100M/500M λ‹¨λ…",
                "internet_tv": "μΈν„°λ„· + TV",
                "internet_tv_add": "μΈν„°λ„· + TV + μ¶”κ°€TV",
                "internet_phone_landline": "μΈν„°λ„· + μΌλ°μ „ν™”",
                "internet_phone_voip": "μΈν„°λ„· + μΈν„°λ„·μ „ν™”",
                "internet_1g_standalone": "1Giga μΈν„°λ„· λ‹¨λ… (μ„¤μΉλΉ„ λ©΄μ )",
                "internet_1g_tv": "1Giga μΈν„°λ„· + TV (μ„¤μΉλΉ„ λ©΄μ )",
                "promo_waiver": "μ„¤μΉλΉ„ λ©΄μ  ν”„λ΅λ¨μ…",
                "none": "μ„λΉ„μ¤ λ―Έμ„ νƒ"
            }
        }
    };
    
    // --- Helper Functions ---
    function findItemById(itemList, itemId) {
        if (!itemId || itemId === 'none') return null;
        return itemList.find(item => item.id === itemId) || null;
    }
    
    function processMobilePlans() {
        allMobilePlans = [];
        for (const tier in mobilePlanTiers) {
            mobilePlanTiers[tier].forEach(plan => {
                const price = parseInt(plan.price.replace(/[^0-9]/g, ''));
                const planId = `${plan.plan_name.replace(/[\s\(\)]/g, '_')}_${price}`;
                allMobilePlans.push({
                    id: planId,
                    name: plan.plan_name,
                    price: price,
                    network: plan.network_type,
                    url: plan.url,
                    tier: tier 
                });
            });
        }
        allMobilePlans.sort((a, b) => a.price - b.price);
    }
    
    function updateTvSubOptionsState() {
        const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        const isInternetStandalone = selectedInternetType === 'standalone';
        const isFirstTvPlanSelected = tvPlanEl.value !== 'none';
    
        const enableTvSubOptions = !isInternetStandalone && isFirstTvPlanSelected;
    
        tvStbEl.disabled = !enableTvSubOptions;
        additionalTvPlanEl.disabled = !enableTvSubOptions;
        phonePlanEl.disabled = isInternetStandalone; 
    
        if (!enableTvSubOptions) {
            tvStbEl.value = 'none';
            additionalTvPlanEl.value = 'none';
        }
        if (isInternetStandalone) {
            phonePlanEl.value = 'none';
        }
    }
    
    
    // --- Existing Configs (OnGajok, Gifts) ---
    const onGajokConfig = { 
        internetDiscountRate: {"0_9": 0.10, "10_19": 0.20, "20_29": 0.30, "30_plus": 0.50},
        mobileDiscountRate: {"0_9": 0, "10_19": 0, "20_29": 0.10, "30_plus": 0.30} 
    };
    const yozoomGajokMobileDiscountReference = { 
        "100": [{ lines: 0, discount: 0 },{ lines: 1, discount: 3500 },{ lines: 2, discount: 7000 },{ lines: 3, discount: 18000 },{ lines: 4, discount: 18000 },{ lines: 5, discount: 18000 }],
        "500_1000": [{ lines: 0, discount: 0 },{ lines: 1, discount: 3500 },{ lines: 2, discount: 7000 },{ lines: 3, discount: 18000 },{ lines: 4, discount: 24000 },{ lines: 5, discount: 24000 }]
    };
    
    // --- Gift Tables (As per original structure, to be kept) ---
    const giftTableSktBase = { 
        "100": { "λ‹¨λ…": 110000, "λ²λ“¤": 430000 }, 
        "500": { "λ‹¨λ…": 170000, "λ²λ“¤": 480000 },
        "1000": { "λ‹¨λ…": 170000, "λ²λ“¤": 480000 } 
    };
    const dongpanGiftTable = { 
        "33K": {"100": {"Economy": 55000, "Standard": 60000, "All": 65000, "λ‹¨λ…": 0 }, "500": {"Economy": 60000, "Standard": 65000, "All": 70000, "λ‹¨λ…": 0 }, "1000": {"Economy": 60000, "Standard": 65000, "All": 70000, "λ‹¨λ…": 0 }},
        "69K": {"100": {"λ‹¨λ…": 130000, "Economy": 159500, "Standard": 174000, "All": 188500 }, "500": {"λ‹¨λ…": 140000, "Economy": 174000, "Standard": 188500, "All": 203000 }, "1000": {"λ‹¨λ…": 140000, "Economy": 174000, "Standard": 188500, "All": 203000 }},
        "80K": {"100": {"λ‹¨λ…": 162500, "Economy": 181500, "Standard": 198000, "All": 214500 }, "500": {"λ‹¨λ…": 175000, "Economy": 198000, "Standard": 214500, "All": 231000 }, "1000": {"λ‹¨λ…": 175000, "Economy": 198000, "Standard": 214500, "All": 231000 }}
    };
    
    // DOM Elements 
    const mobileDiscountDetailsContainerEl = document.getElementById('mobileDiscountDetailsContainer');
    const mobileDiscountBreakdownEl = document.getElementById('mobileDiscountBreakdown');
    const mobileDiscountNoteEl = document.getElementById('mobileDiscountNote');
    const internetTypeRadios = document.querySelectorAll('input[name="internetType"]');
    const internetPlanEl = document.getElementById('internetPlan');
    const wifiRouterEl = document.getElementById('wifiRouter');
    const tvPlanEl = document.getElementById('tvPlan');
    const tvStbEl = document.getElementById('tvStb');
    const additionalTvPlanEl = document.getElementById('additionalTvPlan');
    const phonePlanEl = document.getElementById('phonePlan');
    const mobileLinesCountEl = document.getElementById('mobileLinesCount');
    const mobileLinesContainerEl = document.getElementById('mobileLinesContainer');
    const dongpanSalesCheckEl = document.getElementById('dongpanSalesCheck');
    const dongpanUsimPolicyDetailsContainerEl = document.getElementById('dongpanUsimPolicyDetailsContainer');
    const discountTypeRadios = document.querySelectorAll('input[name="discountType"]');
    const bundleApplicationTimeRadios = document.querySelectorAll('input[name="bundleApplicationTime"]');
    const onGajokYearsGroupEl = document.getElementById('onGajokYearsGroup');
    const onGajokYearsEl = document.getElementById('onGajokYears');
    const yozoomGajokDetailsToggleEl = document.getElementById('yozoomGajokDetailsToggle');
    const yozoomGajokDetailsContainerEl = document.getElementById('yozoomGajokDetailsContainer');
    const detailYgInternetDiscountEl = document.getElementById('detailYgInternetDiscount');
    const detailYgInternetTypeEl = document.getElementById('detailYgInternetType');
    const detailYgMobileDiscountEl = document.getElementById('detailYgMobileDiscount');
    const yozoomGajokInternetDiscountTiersEl = document.getElementById('yozoomGajokInternetDiscountTiers');
    const yozoomGajokMobileDiscountTiersEl = document.getElementById('yozoomGajokMobileDiscountTiers');
    const onGajokDetailsToggleEl = document.getElementById('onGajokDetailsToggle');
    const onGajokDetailsContainerEl = document.getElementById('onGajokDetailsContainer');
    const detailOgInternetDiscountEl = document.getElementById('detailOgInternetDiscount');
    const detailOgMobileDiscountEl = document.getElementById('detailOgMobileDiscount');
    const onGajokInternetDiscountTiersEl = document.getElementById('onGajokInternetDiscountTiers');
    const familySktDetailsToggleEl = document.getElementById('familySktDetailsToggle');
    const familySktDetailsContainerEl = document.getElementById('familySktDetailsContainer');
    const detailFsInternetDiscountEl = document.getElementById('detailFsInternetDiscount');
    const familyInternetDiscountTiersEl = document.getElementById('familyInternetDiscountTiers');
    const mvnoSktDetailsToggleEl = document.getElementById('mvnoSktDetailsToggle');
    const mvnoSktDetailsContainerEl = document.getElementById('mvnoSktDetailsContainer');
    const detailMsInternetDiscountEl = document.getElementById('detailMsInternetDiscount');
    const mvnoInternetDiscountTiersEl = document.getElementById('mvnoInternetDiscountTiers');
    const calculateButton = document.getElementById('calculateButton');
    const resetButton = document.getElementById('resetButton');
    const resultSection = document.getElementById('resultSection');
    
    const summaryMonthlyCostEl = document.getElementById('summaryMonthlyCost');
    const summaryTotalGiftEl = document.getElementById('summaryTotalGift');
    const summaryInternetDiscountEl = document.getElementById('summaryInternetDiscount');
    const summaryMobileDiscountEl = document.getElementById('summaryMobileDiscount');
    const toggleDetailsButtonEl = document.getElementById('toggleDetailsButton');
    const detailsContainerEl = document.getElementById('detailsContainer');
    
    const selectedInternetEl = document.getElementById('selectedInternet');
    const selectedTvEl = document.getElementById('selectedTv');
    const selectedStbEl = document.getElementById('selectedStb');
    const selectedAdditionalTvEl = document.getElementById('selectedAdditionalTv');
    const selectedPhoneEl = document.getElementById('selectedPhone');
    const selectedWifiEl = document.getElementById('selectedWifi');
    const selectedMobileCountEl = document.getElementById('selectedMobileCount');
    const selectedDiscountTypeEl = document.getElementById('selectedDiscountType');
    const selectedOnGajokYearsEl = document.getElementById('selectedOnGajokYears');
    const onGajokYearsResultContainerEl = document.getElementById('onGajokYearsResultContainer');
    const totalBaseInternetCostEl = document.getElementById('totalBaseInternetCost');
    const totalInternetDiscountAmountEl = document.getElementById('totalInternetDiscountAmount');
    const internetDiscountBreakdownEl = document.getElementById('internetDiscountBreakdown');
    const wifiRouterRentalCostDisplayEl = document.getElementById('wifiRouterRentalCostDisplay');
    const tvCostSummaryContainerEl = document.getElementById('tvCostSummaryContainer');
    const tvBaseCostDisplayEl = document.getElementById('tvBaseCostDisplay');
    const stbRentalCostDisplayEl = document.getElementById('stbRentalCostDisplay');
    const additionalTvCostSummaryContainerEl = document.getElementById('additionalTvCostSummaryContainer');
    const additionalTvCostDisplayEl = document.getElementById('additionalTvCostDisplay');
    const phoneCostSummaryContainerEl = document.getElementById('phoneCostSummaryContainer');
    const phoneBaseCostDisplayEl = document.getElementById('phoneBaseCostDisplay');
    const finalMonthlyCostEl = document.getElementById('finalMonthlyCost');
    const finalCostLabelTextEl = document.getElementById('finalCostLabelText');
    const finalCostLabelQualifierEl = document.getElementById('finalCostLabelQualifier');
    const installationCostResultEl = document.getElementById('installationCostResult');
    const installationCostDescriptionEl = document.getElementById('installationCostDescription');
    const giftBaseInternetEl = document.getElementById('giftBaseInternet');
    const additionalDongpanCashContainerEl = document.getElementById('additionalDongpanCashContainer');
    const giftAdditionalDongpanCashEl = document.getElementById('giftAdditionalDongpanCash');
    const giftTotalEl = document.getElementById('giftTotal');
    const giftEligibilityNoteEl = document.getElementById('giftEligibilityNote');
    const messageScriptSectionEl = document.getElementById('messageScriptSection');
    const memoScriptEl = document.getElementById('memoScript');
    const infoScriptEl = document.getElementById('infoScript');
    const completeScriptEl = document.getElementById('completeScript');
    const usimDongpanCompleteScriptEl = document.getElementById('usimDongpanCompleteScript');
    const sensitiveInfoLinkScriptEl = document.getElementById('sensitiveInfoLinkScript');
    
    // --- μ™€μ΄νμ΄ μ„ νƒ λ΅μ§μ„ κ΄€λ¦¬ν•λ” ν—¬νΌ ν•¨μ (μμ •λ¨) ---
    function manageWifiSelection() {
        const selectedInternetId = internetPlanEl.value;
        if (selectedInternetId === 'none') {
            wifiRouterEl.disabled = false;
            if (wifiRouterEl.value === 'wifi_router_yozoom_100M_tv') {
                wifiRouterEl.value = "wifi_router_default";
            }
            return;
        }
    
        const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        const selectedDiscountType = document.querySelector('input[name="discountType"]:checked').value;
    
        const internetPlanInfo = (selectedInternetType === 'bundle') ?
            findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId) :
            findItemById(jsonData.internetPlans_base, selectedInternetId);
    
        const tvSelected = tvPlanEl.value !== 'none';
    
        // "μ”μ¦μ°λ¦¬μ§‘" νΉλ³„ μ™€μ΄νμ΄ μ΅°κ±΄: 100M+TVκ²°ν•©+κ²°ν•©ν• μΈμ—†μ
        const isYozoomWifiCondition = internetPlanInfo &&
                                          internetPlanInfo.speed_mbps === 100 &&
                                          selectedInternetType === 'bundle' &&
                                          tvSelected &&
                                          selectedDiscountType === 'noBundleDiscount';
    
        if (isYozoomWifiCondition) {
            wifiRouterEl.value = "wifi_router_yozoom_100M_tv"; // 2,200μ› μµμ…
            wifiRouterEl.disabled = true;
        } else {
            wifiRouterEl.disabled = false;
            // λ‹¤λ¥Έ κ²°ν•©μ΄ μ„ νƒλμ—μ„ λ•, λ§μ•½ 'μ”μ¦μ°λ¦¬μ§‘' κ³µμ κΈ°κ°€ μ„ νƒλμ–΄ μμ—λ‹¤λ©΄ κΈ°λ³Έ κ³µμ κΈ°λ΅ λ³€κ²½
            if (wifiRouterEl.value === 'wifi_router_yozoom_100M_tv') {
                wifiRouterEl.value = "wifi_router_default"; // 1,100μ› μµμ…
            }
        }
    }
    
    
    // --- ν† κΈ€ μƒμ„Έ λ‚΄μ©μ„ μ—…λ°μ΄νΈν•λ” ν•¨μ ---
    function updateVisibleDetails() {
        allDetailSectionsSkt.forEach(section => {
            if (section.toggleEl && section.toggleEl.checked && section.updateFn) {
                section.updateFn();
            }
        });
    }
    
    
    // --- Populate Select Options ---
    function populateInternetPlansDropdown() {
        const selectedType = document.querySelector('input[name="internetType"]:checked').value;
        let plansToShow;
        if (selectedType === 'bundle') {
            plansToShow = jsonData.internetPlans_tv_bundle_prices;
        } else {
            plansToShow = jsonData.internetPlans_base;
        }
        const currentSelectedInternetId = internetPlanEl.value;
        
        populateSelectWithOptions(internetPlanEl, plansToShow, "μ„ νƒ μ•ν•¨", 'id', 'name', 'price', 'note');
        
        const existingOption = plansToShow.find(p => p.id === currentSelectedInternetId);
        if (existingOption) {
            internetPlanEl.value = currentSelectedInternetId;
        } else if (plansToShow.length > 0) {
             internetPlanEl.value = plansToShow[0].id; 
        } else {
            internetPlanEl.value = 'none';
        }
        handleInternetTypeChange(); 
    }
    
    
    function populateSelectWithOptions(selectElement, items, defaultOptionText = "μ„ νƒ μ•ν•¨", valueField = 'id', nameField = 'name', priceField = 'price', noteField = 'note') {
        if (!selectElement) {
            console.error("Select element not found for population:", selectElement);
            return;
        }
        selectElement.innerHTML = ''; 
        if (defaultOptionText && valueField === 'id') { 
            const defaultOpt = document.createElement('option');
            defaultOpt.value = 'none';
            defaultOpt.textContent = defaultOptionText;
            selectElement.appendChild(defaultOpt);
        }
        items.forEach(item => {
            const option = document.createElement('option');
            option.value = item[valueField];
            let displayText = item[nameField]; 
    
            if (priceField && item[priceField] > 0) {
                 displayText += ` (${item[priceField].toLocaleString()}μ›)`;
            } else if (noteField && item[noteField] && item.price === 0) { 
                 displayText += ` (${item[noteField]})`;
            } else if (noteField && item[noteField] && !item[priceField]) { 
                 displayText += ` (${item[noteField]})`;
            }
    
            option.textContent = displayText;
            option.dataset.price = item[priceField] !== undefined ? item[priceField] : 0;
            if(item.speed_mbps) option.dataset.speed = item.speed_mbps;
            if(item.type) option.dataset.type = item.type;
            if(item.channels) option.dataset.channels = item.channels;
            if(item.stb) option.dataset.defaultStb = item.stb; 
            if(item.note) option.dataset.note = item.note;
            
            selectElement.appendChild(option);
        });
    }
    
    function initializeSelects() {
        processMobilePlans();
        populateInternetPlansDropdown(); 
        
        const wifiOptions = jsonData.addOnServices.filter(s => s.name.includes("μ™€μ΄νμ΄") || s.name.includes("κ³µμ κΈ°"));
        populateSelectWithOptions(wifiRouterEl, wifiOptions, "κ³µμ κΈ° μ„ νƒ μ•ν•¨(X)", 'id', 'name', 'price', 'note');
        
        const specialStbOptions = jsonData.addOnServices.filter(s => s.type === "AI STB" || (s.type === "STB" && s.id !== 'apple_tv_stb_promo') ); 
        const applePromoStb = jsonData.addOnServices.find(s => s.id === 'apple_tv_stb_promo');
        if (applePromoStb) specialStbOptions.push(applePromoStb); 
        populateSelectWithOptions(tvStbEl, specialStbOptions, "μ„ νƒ μ•ν•¨ (κΈ°λ³Έμ…‹ν†± μ‚¬μ©)", 'id', 'name', 'price', 'note');
        
        populateSelectWithOptions(tvPlanEl, jsonData.tvPackages, "μ„ νƒ μ•ν•¨", 'id', 'name', 'price');
        
        populateSelectWithOptions(additionalTvPlanEl, jsonData.additionalTvPackages, "μ„ νƒ μ•ν•¨", 'id', 'name', 'price');
        populateSelectWithOptions(phonePlanEl, jsonData.phonePlans, "μ„ νƒ μ•ν•¨", 'id', 'name', 'price');
    }
    
    
    // Event Listeners
    internetTypeRadios.forEach(radio => {
        radio.addEventListener('change', () => {
            populateInternetPlansDropdown();
            manageWifiSelection();
            updateVisibleDetails();
            updateMobilePlanAvailability();
        });
    });
    
    mobileLinesCountEl.addEventListener('input', () => {
        updateMobileLinesInputs();
        updateVisibleDetails();
    });
    
    calculateButton.addEventListener('click', calculateAndDisplayResults);
    resetButton.addEventListener('click', setInitialDefaults);
    
    toggleDetailsButtonEl.addEventListener('click', () => {
        const isHidden = detailsContainerEl.classList.toggle('hidden');
        if (isHidden) {
            toggleDetailsButtonEl.innerHTML = 'μƒμ„Έ μ”κΈ λ‚΄μ—­ νΌμ³λ³΄κΈ° β–Ό';
        } else {
            toggleDetailsButtonEl.innerHTML = 'μƒμ„Έ μ”κΈ λ‚΄μ—­ μ ‘κΈ° β–²';
        }
    });
    
    dongpanSalesCheckEl.addEventListener('change', function() {
        dongpanUsimPolicyDetailsContainerEl.classList.toggle('hidden', !this.checked);
        updateMobilePlanAvailability();
        if (!resultSection.classList.contains('hidden')) { 
            calculateAndDisplayResults(); 
        }
    });
    
    const allDetailSectionsSkt = [
        { radioValue: 'μ”μ¦κ°€μ΅±κ²°ν•©', toggleEl: yozoomGajokDetailsToggleEl, containerEl: yozoomGajokDetailsContainerEl, updateFn: updateYozoomGajokDetails },
        { radioValue: 'μ¨κ°€μ΅±ν• μΈ', toggleEl: onGajokDetailsToggleEl, containerEl: onGajokDetailsContainerEl, updateFn: updateOnGajokDetails },
        { radioValue: 'ν¨λ°€λ¦¬κ²°ν•©', toggleEl: familySktDetailsToggleEl, containerEl: familySktDetailsContainerEl, updateFn: updateFamilySktDetails },
        { radioValue: 'μ•λ°ν• κ²°ν•©', toggleEl: mvnoSktDetailsToggleEl, containerEl: mvnoSktDetailsContainerEl, updateFn: updateMvnoSktDetails },
        { radioValue: 'noBundleDiscount', toggleEl: null, containerEl: null, updateFn: null } 
    ];
    
    discountTypeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            onGajokYearsGroupEl.classList.toggle('hidden', this.value !== 'μ¨κ°€μ΅±ν• μΈ');
            
            if (this.value === 'noBundleDiscount' || this.value === 'ν¨λ°€λ¦¬κ²°ν•©' || this.value === 'μ•λ°ν• κ²°ν•©') {
                mobileLinesCountEl.value = 0;
                mobileLinesCountEl.disabled = true;
            } else {
                mobileLinesCountEl.disabled = false;
                if (this.value === 'μ”μ¦κ°€μ΅±κ²°ν•©' || this.value === 'μ¨κ°€μ΅±ν• μΈ') {
                    if (parseInt(mobileLinesCountEl.value) === 0) {
                        mobileLinesCountEl.value = 1;
                    }
                }
            }
            updateMobileLinesInputs(); 
    
            // (μμ •λ¨) κ²°ν•© μ ν• λ³€κ²½ μ‹ μ™€μ΄νμ΄ λ΅μ§ μ¬μ‹¤ν–‰
            manageWifiSelection();
    
            allDetailSectionsSkt.forEach(section => {
                if (section.containerEl) { 
                    let isVisible = false;
                    if (this.value === section.radioValue) { 
                        if (section.toggleEl) { 
                            isVisible = section.toggleEl.checked; 
                            if (isVisible && section.updateFn) {
                                section.updateFn();
                            }
                        }
                    } else { 
                        if(section.toggleEl) section.toggleEl.checked = false; 
                        isVisible = false; 
                    }
                    section.containerEl.classList.toggle('hidden', !isVisible);
                } else if (this.value !== section.radioValue && section.toggleEl) { 
                    section.toggleEl.checked = false;
                    if(section.containerEl) section.containerEl.classList.add('hidden');
                }
            });
             if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); } 
        });
    });
    
    allDetailSectionsSkt.forEach(section => {
        if (section.toggleEl) {
            section.toggleEl.addEventListener('change', function() {
                const selectedRadio = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`);
                if (selectedRadio && selectedRadio.checked) { 
                    section.containerEl.classList.toggle('hidden', !this.checked);
                    if (this.checked && section.updateFn) {
                        section.updateFn();
                    }
                }
            });
        }
    });
    
    function handleInternetTypeChange() {
        const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        const isStandaloneInternet = selectedInternetType === 'standalone';
    
        tvPlanEl.disabled = isStandaloneInternet;
        phonePlanEl.disabled = isStandaloneInternet; 
    
        if (isStandaloneInternet) {
            tvPlanEl.value = 'none'; 
            phonePlanEl.value = 'none';
        }
        updateTvSubOptionsState(); 
    }
    
    internetPlanEl.addEventListener('change', () => {
        manageWifiSelection();
        updateVisibleDetails();
        if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); }
    });
    
    
    tvPlanEl.addEventListener('change', () => { 
        updateTvSubOptionsState();
        manageWifiSelection();
        updateVisibleDetails();
        if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); }
    });
    
     [wifiRouterEl, tvStbEl, additionalTvPlanEl, phonePlanEl, onGajokYearsEl].forEach(el => {
         if(el) el.addEventListener('change', () => {
             updateVisibleDetails();
             if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); }
         });
     });
    bundleApplicationTimeRadios.forEach(radio => {
        radio.addEventListener('change', () => {
            if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); }
        });
    });
    
    
    // Functions
    function updateMobilePlanAvailability() {
        const isInternetStandalone = document.querySelector('input[name="internetType"][value="standalone"]').checked;
        const isDongpanChecked = dongpanSalesCheckEl.checked;
        const shouldDisableTplanSave = isInternetStandalone && isDongpanChecked;
    
        const tPlanSaveId = allMobilePlans.find(p => p.name === 'Tν”λμ„Έμ΄λΈ' && p.price === 33000)?.id;
        if (!tPlanSaveId) return;
    
        const mobilePlanSelects = document.querySelectorAll('[id^="mobilePlan"]');
        mobilePlanSelects.forEach(select => {
            const optionToModify = select.querySelector(`option[value="${tPlanSaveId}"]`);
            if (optionToModify) {
                const wasSelectedAndIsNowDisabled = optionToModify.selected && shouldDisableTplanSave;
                
                optionToModify.disabled = shouldDisableTplanSave;
    
                if (wasSelectedAndIsNowDisabled) {
                    const firstAvailableOption = Array.from(select.options).find(opt => !opt.disabled);
                    if (firstAvailableOption) {
                        select.value = firstAvailableOption.value;
                    }
                }
            }
        });
    }
    
    
    function updateMobileLinesInputs() {
        const count = parseInt(mobileLinesCountEl.value) || 0;
        mobileLinesContainerEl.innerHTML = '';
        for (let i = 0; i < count; i++) {
            const div = document.createElement('div');
            div.className = 'mobile-line-item';
            
            const planLabel = document.createElement('label');
            planLabel.htmlFor = `mobilePlan${i}`;
            planLabel.className = 'block text-sm font-medium text-slate-600 mb-1';
            planLabel.textContent = `νμ„  ${i + 1} μ”κΈμ `;
            
            const select = document.createElement('select');
            select.id = `mobilePlan${i}`;
            select.className = 'select-field';
            
            allMobilePlans.forEach(plan => {
                const option = document.createElement('option');
                option.value = plan.id;
                option.textContent = `${plan.name} (${plan.price.toLocaleString()}μ›)`;
                select.appendChild(option);
            });
            
            const defaultPlanId = allMobilePlans.find(p => p.name === 'Tν”λμ„Έμ΄λΈ' && p.price === 33000)?.id || allMobilePlans[0]?.id;
            select.value = defaultPlanId;
    
            const contractDiv = document.createElement('div');
            contractDiv.className = 'mt-2';
            
            const contractLabel = document.createElement('label');
            contractLabel.className = 'radio-label text-sm';
            
            const contractCheckbox = document.createElement('input');
            contractCheckbox.type = 'checkbox';
            contractCheckbox.id = `selectiveContractCheck${i}`;
            contractCheckbox.className = 'radio-input';
            
            contractLabel.appendChild(contractCheckbox);
            contractLabel.append(' μ„ νƒμ•½μ • (25% μ¶”κ°€ ν• μΈ)');
            contractDiv.appendChild(contractLabel);
            
            div.appendChild(planLabel);
            div.appendChild(select);
            div.appendChild(contractDiv);
            mobileLinesContainerEl.appendChild(div);
            
            const recalculateOnChange = () => {
                if (!resultSection.classList.contains('hidden')) {
                    calculateAndDisplayResults();
                }
                 updateVisibleDetails();
            };
    
            select.addEventListener('change', recalculateOnChange);
            contractCheckbox.addEventListener('change', recalculateOnChange);
        }
        updateMobilePlanAvailability();
        if (!resultSection.classList.contains('hidden')) { calculateAndDisplayResults(); }
    }
    
    function updateYozoomGajokDetails() {
        const selectedInternetId = internetPlanEl.value;
        const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        let internetPlanInfo;
        if (selectedInternetType === 'bundle') {
            internetPlanInfo = findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId) || { speed_mbps: 0, price: 0 };
        } else {
            internetPlanInfo = findItemById(jsonData.internetPlans_base, selectedInternetId) || { speed_mbps: 0, price: 0 };
        }
    
        const tvSelectedId = tvPlanEl.value;
        const tvPackage = findItemById(jsonData.tvPackages, tvSelectedId);
        const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
    
        let internetSpeedType = "";
        if (internetPlanInfo && internetPlanInfo.speed_mbps === 100) internetSpeedType = "100M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps === 500) internetSpeedType = "500M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps >= 1000) internetSpeedType = "1GB"; 
        
        let discountCondition = "";
        if (internetSpeedType) {
            discountCondition = tvPackage ? `${internetSpeedType} + TV` : `${internetSpeedType} (λ‹¨λ…)`;
        }
    
        let currentInternetDiscountAmount = 0;
        const discountEntry = jsonData.bundleInternetDiscounts.find(
            d => d.bundle_name === "μ”μ¦κ°€μ΅±κ²°ν•©" && d.condition === discountCondition
        );
        if (discountEntry) {
            currentInternetDiscountAmount = discountEntry.discount_amount;
        }
        
        detailYgInternetDiscountEl.textContent = currentInternetDiscountAmount.toLocaleString();
        detailYgInternetTypeEl.textContent = `(${discountCondition} μ μ© μ‹)`;
    
        let detailMobileD = 0;
        if (internetPlanInfo) {
            let mobileDiscountKey = internetPlanInfo.speed_mbps === 100 ? "100" : "500_1000"; 
            const tiers = yozoomGajokMobileDiscountReference[mobileDiscountKey]; 
            if (tiers) {
                const tier = tiers.find(t => t.lines === numMobileLines) || (numMobileLines > 0 && numMobileLines <=5 ? tiers.find(t => t.lines === Math.min(numMobileLines, 5)) : {discount:0});
                if (tier) detailMobileD = tier.discount;
            }
        }
        detailYgMobileDiscountEl.textContent = detailMobileD.toLocaleString();
    
        if(yozoomGajokInternetDiscountTiersEl) {
            yozoomGajokInternetDiscountTiersEl.innerHTML = '';
            ["100M", "500M", "1GB"].forEach(speed => {
                const standaloneDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "μ”μ¦κ°€μ΅±κ²°ν•©" && d.condition === `${speed} (λ‹¨λ…)`)?.discount_amount || 0;
                const tvBundleDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "μ”μ¦κ°€μ΅±κ²°ν•©" && d.condition === `${speed} + TV`)?.discount_amount || 0;
                const li = document.createElement('li');
                li.textContent = `${speed}: λ‹¨λ… μ‹ ${standaloneDiscount.toLocaleString()}μ›, TVκ²°ν•© μ‹ ${tvBundleDiscount.toLocaleString()}μ› ν• μΈ`;
                yozoomGajokInternetDiscountTiersEl.appendChild(li);
            });
        }
        if(yozoomGajokMobileDiscountTiersEl && internetPlanInfo) { 
            yozoomGajokMobileDiscountTiersEl.innerHTML = ''; 
            const speedKey = internetPlanInfo.speed_mbps === 100 ? "100" : "500_1000";
            (yozoomGajokMobileDiscountReference[speedKey] || []).forEach(tier => {
                const li = document.createElement('li');
                li.textContent = `${tier.lines}νμ„  κ²°ν•© μ‹ μ΄ ${tier.discount.toLocaleString()}μ› λ¨λ°”μΌ ν• μΈ (μ°Έκ³ μ©)`;
                yozoomGajokMobileDiscountTiersEl.appendChild(li);
            });
        }
    }
    
    function updateOnGajokDetails() {
        const selectedInternetId = internetPlanEl.value;
        let internetPlanForSpeed = findItemById(jsonData.internetPlans_base, selectedInternetId) || 
                                     findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId);
        if (!internetPlanForSpeed) {
            detailOgInternetDiscountEl.textContent = "0";
            detailOgMobileDiscountEl.textContent = "0%";
            if (onGajokInternetDiscountTiersEl) onGajokInternetDiscountTiersEl.innerHTML = '<li>μΈν„°λ„· μ”κΈμ λ¥Ό μ„ νƒν•΄μ£Όμ„Έμ”.</li>';
            return;
        }
        
        const standalonePlanForOnGajok = jsonData.internetPlans_base.find(p => p.speed_mbps === internetPlanForSpeed.speed_mbps);
        if (!standalonePlanForOnGajok) {
             detailOgInternetDiscountEl.textContent = "0";
             detailOgMobileDiscountEl.textContent = "0%";
             if (onGajokInternetDiscountTiersEl) onGajokInternetDiscountTiersEl.innerHTML = '<li>ν•΄λ‹Ή μ†λ„μ λ‹¨λ… μ”κΈμ  μ •λ³΄λ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤.</li>';
             return;
        }
    
        const internetPriceForCalc = standalonePlanForOnGajok.price; 
        const yearsKey = onGajokYearsEl.value;
        const internetDiscountRate = onGajokConfig.internetDiscountRate[yearsKey] || 0;
        const mobileDiscountRate = onGajokConfig.mobileDiscountRate[yearsKey] || 0;
        const calculatedInternetDiscount = Math.floor(internetPriceForCalc * internetDiscountRate);
        
        detailOgInternetDiscountEl.textContent = calculatedInternetDiscount.toLocaleString();
        detailOgMobileDiscountEl.textContent = `${(mobileDiscountRate * 100).toFixed(0)}%`;
    
        if (onGajokInternetDiscountTiersEl) {
            onGajokInternetDiscountTiersEl.innerHTML = '';
            for (const [key, rate] of Object.entries(onGajokConfig.internetDiscountRate)) {
                const li = document.createElement('li');
                const yearTextOption = onGajokYearsEl.querySelector(`option[value="${key}"]`);
                const yearText = yearTextOption ? yearTextOption.textContent : key;
                const exampleDiscount = Math.floor(internetPriceForCalc * rate);
                li.textContent = `${yearText}: μΈν„°λ„· λ‹¨λ…μ”κΈ κΈ°μ¤€ ${standalonePlanForOnGajok.name} (${internetPriceForCalc.toLocaleString()}μ›)μ ${(rate * 100).toFixed(0)}% (${exampleDiscount.toLocaleString()}μ›) ν• μΈ`;
                onGajokInternetDiscountTiersEl.appendChild(li);
            }
        }
    }
    
    function updateFamilySktDetails() { 
        const selectedInternetId = internetPlanEl.value;
         const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        let internetPlanInfo;
        if (selectedInternetType === 'bundle') {
            internetPlanInfo = findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId) || { speed_mbps: 0 };
        } else {
            internetPlanInfo = findItemById(jsonData.internetPlans_base, selectedInternetId) || { speed_mbps: 0 };
        }
    
        const tvSelectedId = tvPlanEl.value;
        const tvPackage = findItemById(jsonData.tvPackages, tvSelectedId);
    
        let internetSpeedType = "";
        if (internetPlanInfo && internetPlanInfo.speed_mbps === 100) internetSpeedType = "100M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps === 500) internetSpeedType = "500M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps >= 1000) internetSpeedType = "1GB";
    
        let discountCondition = "";
         if (internetSpeedType) {
            discountCondition = tvPackage ? `${internetSpeedType} + TV` : `${internetSpeedType} (λ‹¨λ…)`;
        }
        
        let currentInternetDiscountAmount = 0;
        const discountEntry = jsonData.bundleInternetDiscounts.find(
            d => d.bundle_name === "ν¨λ°€λ¦¬κ²°ν•©" && d.condition === discountCondition
        );
        if (discountEntry) {
            currentInternetDiscountAmount = discountEntry.discount_amount;
        }
        
        detailFsInternetDiscountEl.textContent = currentInternetDiscountAmount.toLocaleString();
         if(familyInternetDiscountTiersEl) {
            familyInternetDiscountTiersEl.innerHTML = '';
            ["100M", "500M", "1GB"].forEach(speed => {
                const standaloneDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "ν¨λ°€λ¦¬κ²°ν•©" && d.condition === `${speed} (λ‹¨λ…)`)?.discount_amount || 0;
                const tvBundleDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "ν¨λ°€λ¦¬κ²°ν•©" && d.condition === `${speed} + TV`)?.discount_amount || 0;
                 const li = document.createElement('li');
                li.textContent = `${speed}: λ‹¨λ… μ‹ ${standaloneDiscount.toLocaleString()}μ›, TVκ²°ν•© μ‹ ${tvBundleDiscount.toLocaleString()}μ› ν• μΈ`;
                familyInternetDiscountTiersEl.appendChild(li);
            });
        }
    }
    
    function updateMvnoSktDetails() { 
        const selectedInternetId = internetPlanEl.value;
         const selectedInternetType = document.querySelector('input[name="internetType"]:checked').value;
        let internetPlanInfo;
        if (selectedInternetType === 'bundle') {
            internetPlanInfo = findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId) || { speed_mbps: 0 };
        } else {
            internetPlanInfo = findItemById(jsonData.internetPlans_base, selectedInternetId) || { speed_mbps: 0 };
        }
        const tvSelectedId = tvPlanEl.value;
        const tvPackage = findItemById(jsonData.tvPackages, tvSelectedId);
    
        let internetSpeedType = "";
        if (internetPlanInfo && internetPlanInfo.speed_mbps === 100) internetSpeedType = "100M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps === 500) internetSpeedType = "500M";
        else if (internetPlanInfo && internetPlanInfo.speed_mbps >= 1000) internetSpeedType = "1GB";
        
        let discountCondition = "";
        if (internetSpeedType) {
            discountCondition = tvPackage ? `${internetSpeedType} + TV` : `${internetSpeedType} (λ‹¨λ…)`;
        }
        
        let currentInternetDiscountAmount = 0;
        const discountEntry = jsonData.bundleInternetDiscounts.find(
            d => d.bundle_name === "μ•λ°ν• κ²°ν•©" && d.condition === discountCondition
        );
        if (discountEntry) {
            currentInternetDiscountAmount = discountEntry.discount_amount;
        }
        
        detailMsInternetDiscountEl.textContent = currentInternetDiscountAmount.toLocaleString();
        if(mvnoInternetDiscountTiersEl) {
            mvnoInternetDiscountTiersEl.innerHTML = '';
             ["100M", "500M", "1GB"].forEach(speed => {
                const standaloneDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "μ•λ°ν• κ²°ν•©" && d.condition === `${speed} (λ‹¨λ…)`)?.discount_amount || 0;
                const tvBundleDiscount = jsonData.bundleInternetDiscounts.find(d => d.bundle_name === "μ•λ°ν• κ²°ν•©" && d.condition === `${speed} + TV`)?.discount_amount || 0;
                const li = document.createElement('li');
                li.textContent = `${speed}: λ‹¨λ… μ‹ ${standaloneDiscount.toLocaleString()}μ›, TVκ²°ν•© μ‹ ${tvBundleDiscount.toLocaleString()}μ› ν• μΈ`;
                mvnoInternetDiscountTiersEl.appendChild(li);
            });
        }
    }
    
    function calculateAndDisplayResults() {
        const selectedInternetId = internetPlanEl.value;
        const selectedInternetTypeRadio = document.querySelector('input[name="internetType"]:checked').value;
        
        const selectedWifiId = wifiRouterEl.value;
        let selectedTvPackageId = tvPlanEl.value;
        let selectedAdditionalStbId = tvStbEl.value; 
        let selectedAdditionalTvId = additionalTvPlanEl.value;
        let selectedPhonePlanId = phonePlanEl.value;
    
        if (selectedInternetTypeRadio === 'standalone') {
            selectedTvPackageId = 'none';
            selectedAdditionalStbId = 'none';
            selectedAdditionalTvId = 'none';
            selectedPhonePlanId = 'none'; 
        }
    
        const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
        const isDongpanSalesChecked = dongpanSalesCheckEl.checked;
        const discountType = document.querySelector('input[name="discountType"]:checked').value; 
        const selectedBundleApplicationTime = document.querySelector('input[name="bundleApplicationTime"]:checked').value;
        const installationTime = document.querySelector('input[name="installationTime"]:checked').value; 
        const selectedYearsKeyOnGajok = onGajokYearsEl.value;
    
        let internetPriceAsSelectedByDropdown = 0; 
        let internetDiscountAmount = 0;
        let internetDiscountBreakdownText = "";
    
        let finalInternetPlan = null; 
        if (selectedInternetId !== 'none') {
            if (selectedInternetTypeRadio === 'bundle') {
                finalInternetPlan = findItemById(jsonData.internetPlans_tv_bundle_prices, selectedInternetId);
            } else {
                finalInternetPlan = findItemById(jsonData.internetPlans_base, selectedInternetId);
            }
        }
        
        const tvPackage = (selectedInternetTypeRadio === 'bundle') ? findItemById(jsonData.tvPackages, selectedTvPackageId) : null;
    
        if (finalInternetPlan) { 
            internetPriceAsSelectedByDropdown = finalInternetPlan.price;
        } else { 
            finalInternetPlan = { price: 0, speed_mbps: 0, name: "λ―Έμ„ νƒ" }; 
        }
        
        let displayInternetBasePrice = internetPriceAsSelectedByDropdown; 
        let calculationBaseForInternetDiscount = internetPriceAsSelectedByDropdown; 
    
        if (discountType === "μ¨κ°€μ΅±ν• μΈ" && finalInternetPlan && finalInternetPlan.speed_mbps > 0) {
            const standalonePlanForOnGajok = jsonData.internetPlans_base.find(p => p.speed_mbps === finalInternetPlan.speed_mbps);
            if (standalonePlanForOnGajok) {
                calculationBaseForInternetDiscount = standalonePlanForOnGajok.price; 
                if (selectedBundleApplicationTime === 'pre' || selectedInternetTypeRadio === 'standalone') {
                    displayInternetBasePrice = standalonePlanForOnGajok.price; 
                } else { 
                    displayInternetBasePrice = internetPriceAsSelectedByDropdown; 
                }
            }
        }
        
        const wifiAddon = findItemById(jsonData.addOnServices, selectedWifiId);
        let originalWifiPrice = 0; 
        let currentWifiComponentCost = 0; 
        if (wifiAddon) {
            originalWifiPrice = wifiAddon.price; 
             if (wifiAddon.id === "wifi_router_yozoom_100M_tv") {
                if (finalInternetPlan.speed_mbps === 100 && selectedInternetTypeRadio === 'bundle' && tvPackage) { 
                    currentWifiComponentCost = wifiAddon.price; 
                } else {
                     currentWifiComponentCost = 0; 
                     originalWifiPrice = 0; 
                }
            } else {
                currentWifiComponentCost = wifiAddon.price;
            }
        }
    
        let tvComponentCost = 0;
        if (tvPackage) {
            tvComponentCost = tvPackage.price;
        }
    
        let additionalStbComponentCost = 0;
        const additionalStbAddon = (selectedInternetTypeRadio === 'bundle' && tvPackage) ? findItemById(jsonData.addOnServices, selectedAdditionalStbId) : null;
        if (additionalStbAddon) {
            additionalStbComponentCost = additionalStbAddon.price;
        }
        
        let additionalTvComponentCost = 0;
        const additionalTvPackage = (selectedInternetTypeRadio === 'bundle' && tvPackage) ? findItemById(jsonData.additionalTvPackages, selectedAdditionalTvId) : null;
        if (additionalTvPackage) {
            additionalTvComponentCost = additionalTvPackage.price;
        }
    
        let phoneComponentCost = 0;
        const phonePlan = (selectedInternetTypeRadio === 'bundle' || !phonePlanEl.disabled) ? findItemById(jsonData.phonePlans, selectedPhonePlanId) : null;
        if (phonePlan) {
            phoneComponentCost = phonePlan.price;
        }
    
        if (finalInternetPlan && finalInternetPlan.price > 0 && discountType !== "noBundleDiscount") { 
            if (discountType === "μ¨κ°€μ΅±ν• μΈ") {
                const rate = onGajokConfig.internetDiscountRate[selectedYearsKeyOnGajok] || 0;
                internetDiscountAmount = Math.floor(calculationBaseForInternetDiscount * rate); 
                internetDiscountBreakdownText = `(μ¨κ°€μ΅±ν• μΈ ${ (rate * 100).toFixed(0)}% of ${calculationBaseForInternetDiscount.toLocaleString()}μ› μ μ©)`;
            } else { 
                let internetSpeedType = "";
                if (finalInternetPlan.speed_mbps === 100) internetSpeedType = "100M";
                else if (finalInternetPlan.speed_mbps === 500) internetSpeedType = "500M";
                else if (finalInternetPlan.speed_mbps >= 1000) internetSpeedType = "1GB";
    
                let conditionString = "";
                if (internetSpeedType) {
                    conditionString = tvPackage ? `${internetSpeedType} + TV` : `${internetSpeedType} (λ‹¨λ…)`;
                }
                
                const bundleDiscountInfo = jsonData.bundleInternetDiscounts.find(
                    d => d.bundle_name === discountType && d.condition === conditionString
                );
                if (bundleDiscountInfo) {
                    internetDiscountAmount = bundleDiscountInfo.discount_amount;
                    internetDiscountBreakdownText = `(${discountType} ${conditionString} ν• μΈ μ μ©)`;
                } else {
                    internetDiscountAmount = 0;
                    internetDiscountBreakdownText = `(${discountType} μ΅°κ±΄ λ¶μΌμΉ λλ” ν• μΈ μ—†μ)`;
                }
            }
            internetDiscountAmount = Math.min(displayInternetBasePrice, internetDiscountAmount); 
        } else { 
            internetDiscountAmount = 0; 
            internetDiscountBreakdownText = discountType === "noBundleDiscount" ? "(κ²°ν•© ν• μΈ μ—†μ)" : "";
        }
    
        let effectiveInternetDiscount = internetDiscountAmount;
        if (selectedBundleApplicationTime === 'post' && discountType !== "noBundleDiscount") { 
            effectiveInternetDiscount = 0;
        }
        
        let actualInternetCostComponent = displayInternetBasePrice - effectiveInternetDiscount;
    
        let wifiDiscountForOnGajok = 0;
        let actualWifiCostComponent = currentWifiComponentCost; 
    
        if (discountType === "μ¨κ°€μ΅±ν• μΈ" && wifiAddon && finalInternetPlan.speed_mbps < 1000 ) {
            let wifiBaseForOnGajokDiscount = 0;
            if (wifiAddon.id === "wifi_router_default") { 
                wifiBaseForOnGajokDiscount = wifiAddon.price;
            } else if (wifiAddon.id === "wifi_router_yozoom_100M_tv") {
                if (finalInternetPlan.speed_mbps === 100 && selectedInternetTypeRadio === 'bundle' && tvPackage) {
                     wifiBaseForOnGajokDiscount = wifiAddon.price; 
                }
            }
    
            if (wifiBaseForOnGajokDiscount > 0) {
                const wifiDiscountRate = onGajokConfig.internetDiscountRate[selectedYearsKeyOnGajok] || 0;
                wifiDiscountForOnGajok = Math.floor(wifiBaseForOnGajokDiscount * wifiDiscountRate);
                if (selectedBundleApplicationTime === 'pre') {
                    actualWifiCostComponent = wifiBaseForOnGajokDiscount - wifiDiscountForOnGajok;
                } else { 
                    actualWifiCostComponent = wifiBaseForOnGajokDiscount; 
                }
            } else if (wifiAddon.id === "wifi_router_yozoom_100M_tv" && !(finalInternetPlan.speed_mbps === 100 && selectedInternetTypeRadio === 'bundle' && tvPackage)) {
                actualWifiCostComponent = 0; 
            }
        }
         if (selectedBundleApplicationTime === 'post' && discountType !== "μ¨κ°€μ΅±ν• μΈ") { 
            actualWifiCostComponent = currentWifiComponentCost;
        }
        
        let totalSumBeforeDiscountForAllServices = 
            internetPriceAsSelectedByDropdown + 
            originalWifiPrice + 
            (tvPackage ? tvPackage.price : 0) +
            (additionalStbAddon ? additionalStbAddon.price : 0) +
            (additionalTvPackage ? additionalTvPackage.price : 0) +
            (phonePlan ? phonePlan.price : 0);
    
        let totalActualDiscountIfApplied = internetDiscountAmount + wifiDiscountForOnGajok; 
    
        let finalMonthlyCostCalculated = 
            (displayInternetBasePrice - internetDiscountAmount) + 
            (originalWifiPrice - wifiDiscountForOnGajok) +   
            (tvPackage ? tvPackage.price : 0) +
            (additionalStbAddon ? additionalStbAddon.price : 0) +
            (additionalTvPackage ? additionalTvPackage.price : 0) +
            (phonePlan ? phonePlan.price : 0);
        
        let uiFinalMonthlyCostToDisplay;
        if (selectedBundleApplicationTime === 'pre') {
            uiFinalMonthlyCostToDisplay = finalMonthlyCostCalculated;
        } else { 
            uiFinalMonthlyCostToDisplay = totalSumBeforeDiscountForAllServices;
        }
    
        let totalMobileDiscount = 0;
        const perLineDiscounts = [];
        if (numMobileLines > 0 && (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©' || discountType === 'μ¨κ°€μ΅±ν• μΈ')) {
            let yozoomTotalDiscount = 0;
            if (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©' && finalInternetPlan) {
                let mobileDiscountKey = finalInternetPlan.speed_mbps === 100 ? "100" : "500_1000";
                const tiers = yozoomGajokMobileDiscountReference[mobileDiscountKey];
                const tier = tiers.find(t => t.lines === numMobileLines) || (numMobileLines > 0 && numMobileLines <= 5 ? tiers.find(t => t.lines === Math.min(numMobileLines, 5)) : { discount: 0 });
                if (tier) yozoomTotalDiscount = tier.discount;
            }
    
            for (let i = 0; i < numMobileLines; i++) {
                const mobilePlanSelect = document.getElementById(`mobilePlan${i}`);
                const contractCheckbox = document.getElementById(`selectiveContractCheck${i}`);
                if (!mobilePlanSelect) continue;
    
                const selectedPlan = allMobilePlans.find(p => p.id === mobilePlanSelect.value);
                if (!selectedPlan) continue;
    
                let bundleDiscount = 0;
                if (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©') {
                    bundleDiscount = (numMobileLines > 0) ? Math.floor(yozoomTotalDiscount / numMobileLines) : 0;
                } else if (discountType === 'μ¨κ°€μ΅±ν• μΈ') {
                    const mobileDiscountRate = onGajokConfig.mobileDiscountRate[selectedYearsKeyOnGajok] || 0;
                    bundleDiscount = Math.floor(selectedPlan.price * mobileDiscountRate);
                }
    
                let contractDiscount = 0;
                if (contractCheckbox && contractCheckbox.checked) {
                    contractDiscount = Math.floor(selectedPlan.price * 0.25);
                }
    
                const totalPerLineDiscount = bundleDiscount + contractDiscount;
                perLineDiscounts.push({ plan: selectedPlan, discount: totalPerLineDiscount, bundleDiscount, contractDiscount });
                totalMobileDiscount += totalPerLineDiscount;
            }
        }
        
        // --- START: MODIFICATION FOR DISPLAYING ORIGINAL PRICE ---
        summaryMonthlyCostEl.textContent = `${uiFinalMonthlyCostToDisplay.toLocaleString()}μ›`;
        
        // Get the parent container and remove the old original price display if it exists
        const monthlyCostContainer = summaryMonthlyCostEl.parentElement;
        const existingOriginalCost = monthlyCostContainer.querySelector('.original-cost-display');
        if (existingOriginalCost) {
            existingOriginalCost.remove();
        }
    
        // Check if a discount was applied and the displayed price is different from the original price
        const totalDiscountApplied = totalSumBeforeDiscountForAllServices - uiFinalMonthlyCostToDisplay;
        if (totalDiscountApplied > 0) {
            // Create the new element for the original (pre-discount) cost
            const originalCostEl = document.createElement('p');
            originalCostEl.className = 'text-sm text-slate-500 line-through -mt-1 original-cost-display'; // small, gray, strikethrough
            originalCostEl.textContent = `ν• μΈ μ „ ${totalSumBeforeDiscountForAllServices.toLocaleString()}μ›`;
            
            // Insert it right after the main final price element
            summaryMonthlyCostEl.insertAdjacentElement('afterend', originalCostEl);
        }
        // --- END: MODIFICATION ---
    
        summaryInternetDiscountEl.textContent = `- ${internetDiscountAmount.toLocaleString()}μ›`;
        summaryMobileDiscountEl.textContent = `- ${totalMobileDiscount.toLocaleString()}μ›`;
    
        totalBaseInternetCostEl.textContent = displayInternetBasePrice.toLocaleString(); 
        totalInternetDiscountAmountEl.textContent = internetDiscountAmount.toLocaleString(); 
        internetDiscountBreakdownEl.textContent = internetDiscountBreakdownText;
        
        let wifiDisplayText = actualWifiCostComponent.toLocaleString();
        if (discountType === "μ¨κ°€μ΅±ν• μΈ" && wifiAddon && (wifiAddon.id === "wifi_router_default" || wifiAddon.id === "wifi_router_yozoom_100M_tv") && finalInternetPlan.speed_mbps < 1000 && wifiDiscountForOnGajok > 0) {
            let originalPriceForDisplay = 0;
             if (wifiAddon.id === "wifi_router_default") {
                 originalPriceForDisplay = wifiAddon.price;
            } else if (wifiAddon.id === "wifi_router_yozoom_100M_tv" && finalInternetPlan.speed_mbps === 100 && selectedInternetTypeRadio === 'bundle' && tvPackage) {
                 originalPriceForDisplay = wifiAddon.price;
            }
    
             if (originalPriceForDisplay > 0 && actualWifiCostComponent < originalPriceForDisplay && selectedBundleApplicationTime === 'pre') { 
                 wifiDisplayText = `${originalPriceForDisplay.toLocaleString()}μ›μ—μ„ ${wifiDiscountForOnGajok.toLocaleString()}μ› ν• μΈ β†’ ${actualWifiCostComponent.toLocaleString()}`;
            } else if (selectedBundleApplicationTime === 'post'){
                 wifiDisplayText = originalWifiPrice.toLocaleString(); 
            }
        } else if (selectedBundleApplicationTime === 'post') {
             wifiDisplayText = originalWifiPrice.toLocaleString(); 
        }
    
        wifiRouterRentalCostDisplayEl.textContent = wifiDisplayText;
        
        selectedWifiEl.textContent = wifiAddon ? wifiAddon.name : "λ―Έμ„ νƒ";
    
        tvCostSummaryContainerEl.classList.toggle('hidden', !tvPackage);
        if (tvPackage) {
            tvBaseCostDisplayEl.textContent = tvPackage.price.toLocaleString();
            stbRentalCostDisplayEl.textContent = additionalStbComponentCost.toLocaleString();
        }
        
        selectedStbEl.textContent = additionalStbAddon ? additionalStbAddon.name : (tvPackage ? "κΈ°λ³Έ μ…‹ν†± μ‚¬μ©" : "λ―Έμ„ νƒ");
    
    
        additionalTvCostSummaryContainerEl.classList.toggle('hidden', !additionalTvPackage);
        if (additionalTvPackage) {
            additionalTvCostDisplayEl.textContent = additionalTvPackage.price.toLocaleString();
        }
    
        phoneCostSummaryContainerEl.classList.toggle('hidden', !phonePlan);
        if (phonePlan) {
            phoneBaseCostDisplayEl.textContent = phonePlan.price.toLocaleString();
        }
    
        finalMonthlyCostEl.textContent = uiFinalMonthlyCostToDisplay.toLocaleString();
        finalCostLabelTextEl.textContent = "μµμΆ… μμƒ μ›” λ‚©λ¶€μ•΅";
         if (selectedBundleApplicationTime === 'post' && totalActualDiscountIfApplied > 0) {
             finalCostLabelQualifierEl.textContent = ` (ν• μΈ μ „)`;
        } else if (totalActualDiscountIfApplied > 0) {
            finalCostLabelQualifierEl.textContent = "(ν• μΈ μ μ©)";
        } else {
             finalCostLabelQualifierEl.textContent = "(ν• μΈ μ—†μ)";
        }
        
        mobileDiscountBreakdownEl.innerHTML = '';
        mobileDiscountNoteEl.textContent = '';
        if (perLineDiscounts.length > 0) {
            mobileDiscountDetailsContainerEl.classList.remove('hidden');
            if (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©') {
                let yozoomTotalDiscount = perLineDiscounts.reduce((sum, item) => sum + item.bundleDiscount, 0);
                mobileDiscountNoteEl.textContent = `* 'μ”μ¦κ°€μ΅±κ²°ν•©'μ μ΄ κ²°ν•©ν• μΈμ•΅ ${yozoomTotalDiscount.toLocaleString()}μ›μ„ ${numMobileLines}κ°μ νμ„ μ— λ™μΌν•κ² λ‚λ„μ–΄ μ μ©ν• μμƒμΉμ…λ‹λ‹¤.`;
            }
            perLineDiscounts.forEach(item => {
                const finalMobilePrice = item.plan.price - item.discount;
                let discountDetailText = `κ²°ν•© ${item.bundleDiscount.toLocaleString()}μ›`;
                if (item.contractDiscount > 0) {
                    discountDetailText += ` + μ„ νƒμ•½μ • ${item.contractDiscount.toLocaleString()}μ›`;
                }
    
                const p = document.createElement('p');
                p.innerHTML = `
                    <span class="font-semibold">${item.plan.name}</span> (${item.plan.price.toLocaleString()}μ›) 
                    - <span class="text-green-600">ν΄λ€ν° ν• μΈ (${discountDetailText})</span> 
                    = <strong>${finalMobilePrice.toLocaleString()}μ›</strong> 
                    <a href="${item.plan.url}" target="_blank" class="text-sky-500 hover:text-sky-600 text-xs ml-1">(μƒμ„Έλ³΄κΈ°)</a>
                `;
                mobileDiscountBreakdownEl.appendChild(p);
            });
        } else {
            mobileDiscountDetailsContainerEl.classList.add('hidden');
        }
    
        // --- START: New Installation Fee Calculation ---
        let calculatedInstallationFee = 0;
        let feeDescriptionKey = 'none';

        if (installationTime !== 'promo_waiver') {
            const timeKey = installationTime; // 'weekday' or 'weekend'
            const feesForTime = jsonData.installationFees[timeKey];

            const hasInternetService = !!finalInternetPlan && finalInternetPlan.price > 0;
            const is1Giga = hasInternetService && finalInternetPlan.speed_mbps >= 1000;
            const hasTvService = !!tvPackage;
            const hasAdditionalTvService = !!additionalTvPackage;
            const hasPhoneService = !!phonePlan;
            const isLandline = hasPhoneService && phonePlan.id === 'phone_landline';
            const isVoip = hasPhoneService && phonePlan.id !== 'phone_landline';

            if (is1Giga) {
                feeDescriptionKey = hasTvService ? 'internet_1g_tv' : 'internet_1g_standalone';
            } else if (hasInternetService) {
                if (isLandline) {
                    feeDescriptionKey = 'internet_phone_landline';
                } else if (isVoip) {
                    feeDescriptionKey = 'internet_phone_voip';
                } else if (hasAdditionalTvService) {
                    feeDescriptionKey = 'internet_tv_add';
                } else if (hasTvService) {
                    feeDescriptionKey = 'internet_tv';
                } else {
                    feeDescriptionKey = 'internet_100_500_standalone';
                }
            }
            calculatedInstallationFee = feesForTime[feeDescriptionKey] ?? 0;
        } else {
            feeDescriptionKey = 'promo_waiver';
            calculatedInstallationFee = 0;
        }

        installationCostResultEl.textContent = calculatedInstallationFee.toLocaleString();
        installationCostDescriptionEl.textContent = jsonData.installationFees.descriptions[feeDescriptionKey] || "";
        // --- END: New Installation Fee Calculation ---
    
        selectedInternetEl.textContent = finalInternetPlan && finalInternetPlan.price > 0 ? `${finalInternetPlan.name} (${finalInternetPlan.price.toLocaleString()}μ›)` : 'λ―Έμ„ νƒ';
        selectedTvEl.textContent = tvPackage ? tvPackage.name : 'λ―Έμ„ νƒ';
        selectedAdditionalTvEl.textContent = additionalTvPackage ? additionalTvPackage.name : 'λ―Έμ„ νƒ';
        selectedPhoneEl.textContent = phonePlan ? phonePlan.name : 'λ―Έμ„ νƒ';
        selectedMobileCountEl.textContent = numMobileLines;
        
        const discountTypeMapSkt = {"μ”μ¦κ°€μ΅±κ²°ν•©": "μ”μ¦κ°€μ΅±κ²°ν•©","μ¨κ°€μ΅±ν• μΈ": "μ¨κ°€μ΅±ν• μΈ", "ν¨λ°€λ¦¬κ²°ν•©": "ν¨λ°€λ¦¬κ²°ν•©", "μ•λ°ν• κ²°ν•©": "μ•λ°ν• κ²°ν•©", "noBundleDiscount": "κ²°ν•© ν• μΈ μ—†μ"};
        selectedDiscountTypeEl.textContent = discountTypeMapSkt[discountType] || discountType;
    
        onGajokYearsResultContainerEl.classList.toggle('hidden', discountType !== 'μ¨κ°€μ΅±ν• μΈ');
        if (discountType === 'μ¨κ°€μ΅±ν• μΈ') {
            const onGajokYearsOption = onGajokYearsEl.options[onGajokYearsEl.selectedIndex];
            selectedOnGajokYearsEl.textContent = onGajokYearsOption ? onGajokYearsOption.text : '';
        }
    
        let baseInternetGift = 0;
        let additionalDongpanCashSum = 0;
        let giftNote = "";
    
        const internetSpeedForGift = finalInternetPlan ? finalInternetPlan.speed_mbps : 0; 
        const isTvBundledForGift = !!tvPackage;
        const giftKeyForBase = isTvBundledForGift ? "λ²λ“¤" : "λ‹¨λ…";
        const speedKeyForGift = String(internetSpeedForGift);
    
        if (giftTableSktBase[speedKeyForGift] && giftTableSktBase[speedKeyForGift][giftKeyForBase] !== undefined) {
            baseInternetGift = giftTableSktBase[speedKeyForGift][giftKeyForBase];
        }
        giftBaseInternetEl.textContent = baseInternetGift.toLocaleString();
        additionalDongpanCashContainerEl.classList.toggle('hidden', !isDongpanSalesChecked);
    
        if (isDongpanSalesChecked) {
            let qualifyingDongpanMobiles = 0;
            for (let i = 0; i < numMobileLines; i++) {
                const mobilePlanSelect = document.getElementById(`mobilePlan${i}`);
                if (!mobilePlanSelect) continue;
                const selectedPlan = allMobilePlans.find(p => p.id === mobilePlanSelect.value);
                if (!selectedPlan) continue;
                const mobileFee = selectedPlan.price;
                
                let mobileFeeTier = null;
                if (mobileFee >= 33000 && mobileFee < 69000) mobileFeeTier = "33K";
                else if (mobileFee >= 69000 && mobileFee < 79000) mobileFeeTier = "69K"; 
                else if (mobileFee >= 79000) mobileFeeTier = "80K"; 
    
                if (mobileFeeTier) {
                    qualifyingDongpanMobiles++;
                    let internetTypeForDongpan = speedKeyForGift;
                    
                    let tvCategoryForDongpan = "λ‹¨λ…";
                    if (tvPackage) {
                        if (tvPackage.name.includes("μ΄μ½”λ…Έλ―Έ")) tvCategoryForDongpan = "Economy";
                        else if (tvPackage.name.includes("μ¤νƒ λ‹¤λ“")) tvCategoryForDongpan = "Standard";
                        else if (tvPackage.name.includes("ALL")) tvCategoryForDongpan = "All";
                    }
    
                    if (dongpanGiftTable[mobileFeeTier] && dongpanGiftTable[mobileFeeTier][internetTypeForDongpan] &&
                        dongpanGiftTable[mobileFeeTier][internetTypeForDongpan][tvCategoryForDongpan] !== undefined) {
                        additionalDongpanCashSum += dongpanGiftTable[mobileFeeTier][internetTypeForDongpan][tvCategoryForDongpan];
                    }
                }
            }
            if (numMobileLines > 0 && qualifyingDongpanMobiles === 0 && additionalDongpanCashSum === 0) {
                giftNote = "λ™ν μ¶”κ°€ μ‚¬μ€ν’: μ„ νƒλ λ¨λ°”μΌ μ”κΈμ κ°€ λ™ν μ‚¬μ€ν’ μ§€κΈ‰ κΈ°μ¤€(μ²«λ²μ§Έ νμ„  3.3λ§ μ΄μƒ λ“±)μ— ν•΄λ‹Ήν•μ§€ μ•μµλ‹λ‹¤.";
            } else if (numMobileLines === 0 && isDongpanSalesChecked) {
                giftNote = "λ™ν μ¶”κ°€ μ‚¬μ€ν’: λ¨λ°”μΌ νμ„ μ΄ μ—†μ–΄ λ™ν μ¶”κ°€ μ‚¬μ€ν’ μ΅°κ±΄μ΄ μ¶©μ΅±λμ§€ μ•μ•μµλ‹λ‹¤."
            }
        }
        giftAdditionalDongpanCashEl.textContent = additionalDongpanCashSum.toLocaleString();
        giftEligibilityNoteEl.textContent = giftNote;
        const totalGiftAmount = baseInternetGift + additionalDongpanCashSum;
        giftTotalEl.textContent = totalGiftAmount.toLocaleString();
        summaryTotalGiftEl.textContent = `${totalGiftAmount.toLocaleString()}μ›`;
        
        updateVisibleDetails(); 
    
        resultSection.classList.remove('hidden');
        messageScriptSectionEl.classList.remove('hidden');
        generateMessageScriptsSkt(totalSumBeforeDiscountForAllServices, finalMonthlyCostCalculated, perLineDiscounts); 
    }
    
    function generateMessageScriptsSkt(totalBaseSumForScripts, finalMonthlyCostForScripts, perLineDiscounts) {
        // --- START: Common variables for all scripts ---
        const internetOption = internetPlanEl.options[internetPlanEl.selectedIndex];
        const internetPlanText = internetOption.value !== 'none' ? internetOption.textContent.split(' (')[0] : 'μΈν„°λ„· λ―Έμ„ νƒ';

        const tvPackage = findItemById(jsonData.tvPackages, tvPlanEl.value);
        const additionalStb = findItemById(jsonData.addOnServices, tvStbEl.value);
        let firstTvText = "λ―Έμ„ νƒ";
        if (tvPackage) {
            firstTvText = tvPackage.name.split(' (')[0];
            if (additionalStb) {
                firstTvText += ` + ${additionalStb.name.split(' (')[0]}`;
            }
        }

        const additionalTvPackage = findItemById(jsonData.additionalTvPackages, additionalTvPlanEl.value);
        const phonePackage = findItemById(jsonData.phonePlans, phonePlanEl.value);
        const wifiPackage = findItemById(jsonData.addOnServices, wifiRouterEl.value);

        const totalGift = giftTotalEl.textContent;
        const discountTypeText = selectedDiscountTypeEl.textContent;
        // --- END: Common variables ---


        // --- START: Script 2. μƒν’ μ•λ‚΄ λ¬Έμ (Info Script) ---
        let wiredScript = '[μ μ„  μƒν’]';
        wiredScript += `\nβ–¶οΈ ${internetPlanText}`;
        if (tvPackage) wiredScript += `\nβ–¶οΈ ${firstTvText}`;
        if (additionalTvPackage) wiredScript += `\nβ–¶οΈ ${additionalTvPackage.name.split(' (')[0]}`;
        if (phonePackage) wiredScript += `\nβ–¶οΈ ${phonePackage.name.split(' (')[0]}`;
        if (wifiPackage && wifiPackage.id !== 'wifi_router_not_selected') {
            wiredScript += `\nβ–¶οΈ ${wifiPackage.name.split(' (')[0]}`;
            if (wifiPackage.url) {
                 wiredScript += `\n   (μ •λ³΄: ${wifiPackage.url})`;
            }
        }

        let mobileScript = '';
        if (perLineDiscounts && perLineDiscounts.length > 0) {
            mobileScript += '\n\n[κ²°ν•© λ¨λ°”μΌ]';
            perLineDiscounts.forEach(item => {
                const finalMobilePrice = item.plan.price - item.discount;
                mobileScript += `\nβ–¶οΈ ${item.plan.name} (${item.plan.price.toLocaleString()}μ›) - ${item.bundleDiscount.toLocaleString()} (κ²°ν•©) - ${item.contractDiscount.toLocaleString()} (μ„ μ•½) = μµμΆ… ${finalMobilePrice.toLocaleString()}μ›`;
                mobileScript += `\n   (μ •λ³΄: ${item.plan.url})`;
            });
        }
        
        let finalSummaryScript = '\n\n[μµμΆ… μ”κΈ λ° ννƒ]';
        finalSummaryScript += `\nβ–¶οΈ μ›” ${finalMonthlyCostForScripts.toLocaleString()}μ› (${discountTypeText})`;
        finalSummaryScript += `\nβ–¶οΈ μ‚¬μ€ν’ ${totalGift}μ›`;

        infoScriptEl.value = `[λ―Έμ†] μƒν’ & μ‚¬μ€ν’ μ”μ•½ μ•λ‚΄
μ•λ…•ν•μ„Έμ”, λ―Έμ† μΈν„°λ„· μ…λ‹λ‹¤.
κ³ κ°λ‹κ»μ„ μ¤λ μƒλ‹΄ λ°›μΌμ‹  μƒν’ μ•λ‚΄λ“λ¦½λ‹λ‹¤.

${wiredScript}` +
(mobileScript ? `${mobileScript}` : '') +
`${finalSummaryScript}

* ννƒμ€ μ‹¤μ‹κ°„μΌλ΅ λ°”λ€” μ μλ‹¤λ” μ  μ•λ‚΄λ“λ¦½λ‹λ‹¤.
* 3λ…„ μ•½μ • κΈ°μ¤€
λ―Έμ† λ“λ¦Ό.`;
        // --- END: Info Script ---


        // --- START: Script 1. μ „μ‚° λ©”λ¨ (Memo Script) ---
        const currentSelectedBundleApplicationTime = document.querySelector('input[name="bundleApplicationTime"]:checked').value;
        const monthlyFeeTextForMemo = `μ›” ${totalBaseSumForScripts.toLocaleString()}μ›(ν• μΈμ μ©μ „κΈμ•΅)${currentSelectedBundleApplicationTime === 'pre' && (totalBaseSumForScripts - finalMonthlyCostForScripts > 0) ? ` / μ›” ${finalMonthlyCostForScripts.toLocaleString()}μ›(ν• μΈμ μ©κΈμ•΅)` : ''}`;
        
        const baseInternetGiftText = document.getElementById('giftBaseInternet').textContent;
        const additionalDongpanGiftText = document.getElementById('giftAdditionalDongpanCash').textContent;
        const isDongpanChecked = dongpanSalesCheckEl.checked;
        let giftBreakdown = `κΈ°λ³Έ ${baseInternetGiftText}μ›`;
        if(isDongpanChecked && parseInt(additionalDongpanGiftText.replace(/,/g, '')) > 0) {
            giftBreakdown += ` + λ™νμ¶”κ°€(λ¨λ°”μΌμ—°λ™) ${additionalDongpanGiftText}μ›`;
        }
        const installFee = installationCostResultEl.textContent; 

        let productDescriptionMemo = internetPlanText;
        if (wifiPackage && wifiPackage.id !== 'wifi_router_not_selected') productDescriptionMemo += ` + ${wifiPackage.name.split(' (')[0]}`;
        if (tvPackage) productDescriptionMemo += ` + ${firstTvText}`;
        if (additionalTvPackage) productDescriptionMemo += ` + ${additionalTvPackage.name.split(' (')[0]}`;
        if (phonePackage) productDescriptionMemo += ` + ${phonePackage.name.split(' (')[0]}`;

        const discountType = document.querySelector('input[name="discountType"]:checked').value;
        let bundleTypeText = "";
        if (discountType === 'μ”μ¦κ°€μ΅±κ²°ν•©') bundleTypeText = 'μ”κ°€';
        else if (discountType === 'μ¨κ°€μ΅±ν• μΈ') bundleTypeText = 'μ¨ν• ';

        const numMobileLines = parseInt(mobileLinesCountEl.value) || 0;
        let mobilePlansText = "ν•΄λ‹Ή μ—†μ";
        if (numMobileLines > 0) {
            const planNames = perLineDiscounts.map(item => item.plan.name);
            mobilePlansText = planNames.join(', ');
        }

        const baekmegaMemo = `\n\n<λ°±λ©”κ°€ κΈ°νƒ€ λ©”λ¨ μ–‘μ‹>
    κ³ κ°λ… :
    λ™νμ μ„ λ…μμ :
    μ—°λ½μ² :
    κΈ°μ΅΄ν†µμ‹ μ‚¬ :
    μ μ‹¬λ°μ†΅μ£Όμ† :
    μ„ νƒμ•½μ •μ—¬λ¶€ (12κ°μ›”/24κ°μ›”) :
    μ”κΈμ  : ${mobilePlansText}
    μ μ‹¬λΉ„ ν›„μ²­κµ¬ λ™μ (Y/N) : Y
    β… κ²°ν•©μ—¬λ¶€ (μ”κ°€/μ¨ν• ) : ${bundleTypeText}
    β… ν• μΈμ§€μ •(λ€ν‘μν• μΈorλ¶„ν• ν• μΈ) : λ¶„ν• ν• μΈ
    β… ν¨μ¤orμ‹ μ©μΉ΄λ“ μΈμ¦ : ν¨μ¤μΈμ¦`;

        const requiredGuidanceMemo = `\n\n<κ³ κ° μƒν™©μ—λ”°λ¥Έ ν•„μμ•λ‚΄μ‚¬ν•­ μ™„λ£>
    1.  κΈ°μ΅΄ κ°€μ΅± λλ” λ³ΈμΈ λ…μ νμ„  μλ” κ²½μ° μ μ§€ ν•„μ” μ•λ‚΄ μ™„λ£
    2. μ΄μ‚¬ κ³ κ° Y / μ¶”ν›„ μ†λ… λ°μƒ μ‹ κ΄€λ ¨ μ„λ¥ μ μ¶ λ™μ μκΈ
    3. μΈν„°λ„· μ„¤μΉ ν›„ κ³ κ°μ„Όν„°λ΅ ν›„κ²°ν•© μ”μ²­ μ•λ‚΄ μ™„λ£`;

        memoScriptEl.value = `[SKB/SKT λ―Έμ† μƒλ‹΄ λ©”λ¨]
    1. μƒν’ : ${productDescriptionMemo}
    2. μ”κΈ : ${monthlyFeeTextForMemo}
    3. μ‚¬μ€ν’ μ΄μ•΅ : ${totalGift}μ› (${giftBreakdown}) (μμƒ)
    4. μ„¤μΉλΉ„ : ${installFee}μ›
    5. κ²°ν•©μ μ©μ‹μ : ${currentSelectedBundleApplicationTime === 'pre' ? 'μ„ κ²°ν•©' : 'ν›„κ²°ν•©'}
    6. κΈ°νƒ€ : μ΄μ‚¬ μ—¬λ¶€ [ ] / ν¬λ§μ„¤μΉμΌμ [    λ…„  μ›”  μΌ]
    7. ν• μΈμ ν•: ${discountTypeText}
    ${onGajokYearsResultContainerEl.classList.contains('hidden') ? '' : `8. μ¨κ°€μ΅±μ΄μ—°μ: ${selectedOnGajokYearsEl.textContent}`}
    9. λ¨λ°”μΌκ²°ν•©νμ„ : ${selectedMobileCountEl.textContent}κ°
    10. λ™ννλ§¤κ°€μ μ©: ${isDongpanChecked ? 'Y' : 'N'}` + (isDongpanChecked ? baekmegaMemo : '') + requiredGuidanceMemo;
        // --- END: Memo Script ---


        // --- START: Script 3. κ°€μ… μ™„λ£ λ¬Έμ (Complete Script) ---
        let productDescriptionComplete = `β–¶οΈ ${internetPlanText}`;
        if (wifiPackage && wifiPackage.id !== 'wifi_router_not_selected') productDescriptionComplete += `\nβ–¶οΈ ${wifiPackage.name.split(' (')[0]}`;
        if (tvPackage) productDescriptionComplete += `\nβ–¶οΈ ${firstTvText}`;
        if (additionalTvPackage) productDescriptionComplete += `\nβ–¶οΈ ${additionalTvPackage.name.split(' (')[0]}`;
        if (phonePackage) productDescriptionComplete += `\nβ–¶οΈ ${phonePackage.name.split(' (')[0]}`;

        const descriptiveMonthlyFeeText = `μ›” ${finalMonthlyCostForScripts.toLocaleString()}μ› (${discountTypeText})`;

        completeScriptEl.value = `[SKB/SKT λ―Έμ†] κ°€μ… μ™„λ£ μ•λ‚΄
    μ•λ…•ν•μ„Έμ”, κ³ κ°λ‹. λ―Έμ† SKλΈλ΅λ“λ°΄λ“/SKν…”λ μ½¤ λ¶€μ„μ…λ‹λ‹¤.
    β… κ³„μ•½μ΄ μ™„λ£λμ—μ–΄μ”, μ•„λ λ‚΄μ©μ€ κ³„μ•½μ„μ™€ λ™μΌν• ν¨λ ¥μ΄ μμΌλ‹ κΌΌκΌΌν μ½μ–΄μ£Όμ„Έμ”.
    β οΈ 3λ…„ μ•½μ •μ΄λ©°, μ•„λμ™€ κ°™μ€ μƒν™©μ— ν•΄λ‹Ήν•λ©΄ λ°›μΌμ…¨λ μ‚¬μ€ν’μ€ ν™μλ  μ μμµλ‹λ‹¤:
    β‘  1λ…„ μ΄λ‚΄ ν•΄μ§€ β‘΅ 3κ°μ›”(90μΌ) μ΄μƒ μ •μ§€ β‘Ά 1λ…„ μ΄λ‚΄ μ”κΈμ  ν•ν–¥ β‘£ 3κ°μ›” μ΄λ‚΄ λ…μλ³€κ²½ β‘¤ κ°ν†µ 1κ°μ›” μ΄λ‚΄ κ²°μ μλ‹¨ μ§€λ΅ λ³€κ²½
    β οΈ μ‹ κ· κ°€μ… ν›„ κΈ°μ΅΄ μΈν„°λ„·μ€ κΌ­ μ§μ ‘ ν•΄μ§€ν•΄μ£Όμ„Έμ”. μλ™ν•΄μ§€λμ§€ μ•μ•„ μ”κΈμ΄ μ΄μ¤‘ λ¶€κ³Όλ  μ μμµλ‹λ‹¤.
    β οΈ 3λ…„ μ΄λ‚΄ ν•΄μ§€ μ‹ ν†µμ‹ μ‚¬ λ³Έμ‚¬μ— μ„μ•½κΈ(ν• μΈ λ°ν™κΈ) λ° λ©΄μ λ μ¥λΉ„ μ„λ€λ£/μ„¤μΉλΉ„ λ“±μ΄ λ¶€κ³Όλ  μ μμµλ‹λ‹¤.
    β… κ°€μ… μƒν’ μ•λ‚΄
    ${productDescriptionComplete}
    β–¶οΈ ${descriptiveMonthlyFeeText}
    β–¶οΈ μ„¤μΉλΉ„ ${installFee}μ› μ²« λ‹¬ λ¶€κ³Ό
    β–¶οΈ μ΄ μ‚¬μ€ν’ ${totalGift}μ› (${giftBreakdown}) (μμƒ)
    β…μ‚¬μ€ν’μ€ μ„¤μΉ ν›„ 7μΌ μ΄λ‚΄ μλ™μΌλ΅ μ§€κΈ‰λλ‚ ν‰μΌκΈ°μ¤€ 5μ‹ μ΄μ „ κ°ν†µ λ°›μ•λ‹¤κ³  λ¬Έμ μ£Όμ‹λ©΄ λ‹ΉμΌμ…κΈ λ„μ›€λ“λ¦¬κ² μµλ‹λ‹¤.
    π” ν•΄λ‹Ή μ—°λ½μ²λ΅ μ—°λ½μ΄ μ–΄λ ¤μΈ κ²½μ° κ±±μ •ν•μ§€ λ§μ„Έμ”! μ•„λ λ€ν‘λ²νΈλ΅ λ¬Έμμ£Όμ‹λ©΄ ν™•μΈν•μ—¬ μ—°λ½λ“λ¦¬κ² μµλ‹λ‹¤.
    [λ―Έμ†λ¥Ό μ†κ°ν•΄μ£Όμ„Έμ”]
    μ§€μΈμ΄ λ―Έμ†μ—μ„ μΈν„°λ„·/TV μ„¤μΉν•λ©΄ μ†κ°ν•΄μ£Όμ‹  λ¶„μ—κ² ν„κΈ ννƒμ„ λ“λ ¤μ”! (μμ„Έν• λ‚΄μ©μ€ λ¬Έμ)
    λ―Έμ† λ“λ¦Ό.`;
        // --- END: Complete Script ---

        
        // --- Other Scripts (Unchanged from previous logic) ---
        if (usimDongpanCompleteScriptEl) {
            usimDongpanCompleteScriptEl.value = `[λ―Έμ†] μ μ‹¬ μ ‘μ μ™„λ£ μ•λ‚΄
    μ•λ…•ν•μ„Έμ”, κ³ κ°λ‹.
    λ―Έμ† μΈν„°λ„· λ¶€μ„μ…λ‹λ‹¤.
    β… μ μ‹¬λ™ν μ ‘μκ°€ μ™„λ£λμ—μ–΄μ”, μ•„λ λ‚΄μ©μ€ κ³„μ•½μ„μ™€ λ™μΌν• ν¨λ ¥μ΄ μμΌλ‹ κΌΌκΌΌν μ½μ–΄μ£Όμ„Έμ”.β οΈ 12κ°μ›”/24κ°μ›” μ•½μ •μ΄λ©°, μ•„λμ™€ κ°™μ€ μƒν™©μ— ν•΄λ‹Ήν•λ©΄ λ°›μΌμ…¨λ μ‚¬μ€ν’μ€ ν™μ λ©λ‹λ‹¤.β‘  183μΌ μ΄λ‚΄ ν•΄μ§€ λ° μ”κΈμ  ν•ν–¥
    β‘΅ κ°ν†µ ν›„ λ¬΄ν†µν™” λ€μƒ
    β‘Ά 183μΌ μ΄λ‚΄ λ…μλ³€κ²½ ν†µμ‹ μ‚¬ λ³€κ²½ μ‹β‘£ 183μΌ μ΄λ‚΄ κ²°ν•© ν•΄μ§€
    β‘¤ μΈν„°λ„· κ°ν†µ ν›„ μµμ›” λ§μΌκΉμ§€ κΌ­ μ μ‹¬ κ°ν†µμ΄ ν•„μ”ν•΄μ”!
    β οΈ μ μ‹¬ κ°ν†µ μ™„λ£ λλ©΄ μ‚¬μ©ν•μ…¨λ μ μ‹¬κ³Ό κµμ²΄ν•μ—¬ κΈ°κΈ° μ „μ›μ„ 3~4ν κ»λ‹¤ ν‚¤μ‹λ©΄ λ©λ‹λ‹¤!β…μ‚¬μ€ν’μ€ μ„¤μΉ ν›„ 7μΌ μ΄λ‚΄ μλ™μΌλ΅ μ§€κΈ‰λλ‚ ν‰μΌκΈ°μ¤€ 5μ‹ μ΄μ „ κ°ν†µ λ°›μ•λ‹¤κ³  λ¬Έμ μ£Όμ‹λ©΄ λ‹ΉμΌμ…κΈ λ„μ›€λ“λ¦¬κ² μµλ‹λ‹¤.π” ν•΄λ‹Ή μ—°λ½μ²λ΅ μ—°λ½μ΄ μ–΄λ ¤μΈ κ²½μ° κ±±μ •ν•μ§€ λ§μ„Έμ”! μ•„λ λ€ν‘λ²νΈλ΅ λ¬Έμμ£Όμ‹λ©΄ ν™•μΈν•μ—¬ μ—°λ½λ“λ¦¬κ² μµλ‹λ‹¤. μ‹κ°„ μ–‘ν•΄ λ¶€νƒλ“λ ¤μ”.[λ―Έμ†λ¥Ό μ†κ°ν•΄μ£Όμ„Έμ”]
    μ§€μΈμ΄ λ―Έμ†μ—μ„ μΈν„°λ„· μ„¤μΉν•λ©΄ μ†κ°ν•΄μ£Όμ‹  λ¶„μ—κ² 3λ§μ› λ“λ ¤μ”.β–¶ μ§€μΈμ—κ² μ¶”μ²ν•κ³  3O,OOOμ› λ°›κΈ° (β†“)
    https://get.miso.kr/pZbfsUPthzb
    λ―Έμ† λ“λ¦Ό.β λ―Έμ† λ€ν‘λ²νΈ 1577-8808 μ¤μ „ 9μ‹ ~ μ¤ν›„ 10μ‹ (μ—°μ¤‘λ¬΄ν΄)`;
        }
    
        if (sensitiveInfoLinkScriptEl) {
            sensitiveInfoLinkScriptEl.value = `[SK] μ•„λ λ§ν¬μ— κ³ κ°λ‹μ λ―Όκ°μ •λ³΄λ¥Ό μ…λ ¥ν•μ‹λ©΄ SKλ΅ κ³ κ°λ‹μ λ―Όκ°μ •λ³΄κ°€ μ§μ ‘ μ „μ†΅ν›„ μ ‘μ λ©λ‹λ‹¤.
μ…λ ¥ν›„ μ ‘μ μ™„λ£ λΌκ³  λ¬Έμ μ£Όμ‹λ©΄ λ‹΄λ‹Ή μƒλ‹΄μ›μ΄ μ ‘μ ν™•μΈν›„ ν•„μ μ•λ‚΄μ‚¬ν•­ μ•λ‚΄ λ“λ¦¬κ² μµλ‹λ‹¤.
https://miso.kr/booking/forms/secure-details?querystring=κ³ κ°λ‹ μ „ν™”λ²νΈ`;
        }
    }
    
    function copyToClipboard(elementId, feedbackElementId) {
        const textarea = document.getElementById(elementId);
        textarea.select();
        textarea.setSelectionRange(0, 99999); 
        try {
            document.execCommand('copy');
            const feedbackEl = document.getElementById(feedbackElementId);
            feedbackEl.textContent = 'λ³µμ‚¬λμ—μµλ‹λ‹¤!';
            setTimeout(() => { feedbackEl.textContent = ''; }, 2000);
        } catch (err) {
            const feedbackEl = document.getElementById(feedbackElementId);
            feedbackEl.textContent = 'λ³µμ‚¬ μ‹¤ν¨';
            setTimeout(() => { feedbackEl.textContent = ''; }, 2000);
        }
        window.getSelection().removeAllRanges(); 
    }
    
    // Initialize
    function setInitialDefaults() {
        initializeSelects(); 
    
        const noBundleDiscountRadio = document.querySelector('input[name="discountType"][value="noBundleDiscount"]');
        if (noBundleDiscountRadio) {
            noBundleDiscountRadio.checked = true;
            const discountChangeEvent = new Event('change', { bubbles: true });
            noBundleDiscountRadio.dispatchEvent(discountChangeEvent);
        }
        
        const internetTypeStandaloneRadio = document.querySelector('input[name="internetType"][value="standalone"]');
        if (internetTypeStandaloneRadio) { 
            internetTypeStandaloneRadio.checked = true;
        }
        populateInternetPlansDropdown(); 
        
        const firstStandaloneInternet = jsonData.internetPlans_base[0]?.id;
         if (internetPlanEl.querySelector(`option[value="${firstStandaloneInternet}"]`)) {
            internetPlanEl.value = firstStandaloneInternet;
        } else if (jsonData.internetPlans_base.length > 0) { 
             internetPlanEl.value = jsonData.internetPlans_base[0].id;
        } else {
             internetPlanEl.value = 'none';
        }
        const internetPlanChangeEvent = new Event('change'); 
        internetPlanEl.dispatchEvent(internetPlanChangeEvent); 
    
    
        tvPlanEl.value = 'none'; 
        wifiRouterEl.value = "wifi_router_default"; 
        tvStbEl.value = 'none'; 
        additionalTvPlanEl.value = 'none';
        phonePlanEl.value = 'none';
        
        dongpanSalesCheckEl.checked = false;
    
        const weekdayInstallRadio = document.querySelector('input[name="installationTime"][value="weekday"]');
        if(weekdayInstallRadio) weekdayInstallRadio.checked = true;
    
        updateTvSubOptionsState();
        manageWifiSelection();
    
        allDetailSectionsSkt.forEach(section => {
            let isVisible = false; 
            if (section.containerEl) {
                const isSelected = document.querySelector(`input[name="discountType"][value="${section.radioValue}"]`).checked;
                if (isSelected) { 
                    if (section.toggleEl) isVisible = section.toggleEl.checked;
                } else { 
                    if (section.toggleEl) section.toggleEl.checked = false;
                }
                section.containerEl.classList.toggle('hidden', !isVisible);
                if (isVisible && section.updateFn) section.updateFn();
            }
        });
        
        onGajokYearsGroupEl.classList.toggle('hidden', document.querySelector('input[name="discountType"]:checked').value !== 'μ¨κ°€μ΅±ν• μΈ');
        dongpanUsimPolicyDetailsContainerEl.classList.toggle('hidden', !dongpanSalesCheckEl.checked);
        
        resultSection.classList.add('hidden');
        messageScriptSectionEl.classList.add('hidden');
    
        detailsContainerEl.classList.add('hidden');
        toggleDetailsButtonEl.innerHTML = 'μƒμ„Έ μ”κΈ λ‚΄μ—­ νΌμ³λ³΄κΈ° β–Ό';
    
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    window.onload = setInitialDefaults;
    </script>
</body>
</html>
